function redirectIfNoSuggestion(keyword,selector){var redirectUrl;var analyticsKey=selector+":nosugclk::user-entered:"+keyword.replace(/:/g,'-').replace(/&amp;/g,'-').substring(0,75);$.ajax({type:"POST",url:'/destinationsearch/searchredirect',data:{keyword:keyword},async:false,success:function(response){redirectUrl=response;},error:function(){redirectUrl="/tripsavailable?q=";if(keyword){redirectUrl+=keyword;}}});if(keyword){$("#user-entered-keyword").html("<a class='user-entered-menu' href='"+redirectUrl+"&ds=true"+"' gcc-analytics-rule='Link' data-link-value='"+analyticsKey+"' hidden> </a>");}else{$("#user-entered-keyword").html("<a class='user-entered-menu' href='"+redirectUrl+"?ds=true"+"' gcc-analytics-rule='Link' data-link-value='"+analyticsKey+"' hidden> </a>");}
angularUtils.refreshAngular(null,"#user-entered-keyword");setTimeout(function(){$(".user-entered-menu").click();window.location.href=redirectUrl;$("#user-entered-keyword").html("");},1000);}
function redirectToSearchResult(keyword){var menuItem=$('.ui-autocomplete-category[data-ui-autocomplete-item]').filter(function(){if(this.attributes.getNamedItem('data-ui-autocomplete-item').value.toLowerCase()==keyword){return this;}});if(menuItem&&menuItem.length>0){var menu=$(menuItem).children('a')[0];if(menu&&!gcc.isMenuClicked){menu.click();}else if(gcc.isMenuClicked){var redirectTo=$(menu).attr('href');window.location.href=redirectTo;}}else{var noSuggItem=$('li.ui-autocomplete-category')[0];if(noSuggItem){var item=$(noSuggItem).children('a')[0];if(item){item.click();}}}}
function searchFromCarousel(event,hasSug){event.preventDefault();event.stopPropagation();var keyword=$('#trip-keyword-hero').val().toLowerCase();if(hasSug){redirectToSearchResult(keyword,"hpsbx");}else{redirectIfNoSuggestion(keyword,"hpsbx");}}
function searchFromGlobalSearch(event,hasSug){event.preventDefault();event.stopPropagation();var keyword=$('#trip-keyword-global').val().toLowerCase();if(hasSug){redirectToSearchResult(keyword,"glbsbx");}else{redirectIfNoSuggestion(keyword,"glbsbx");}}
$(function(){if(isInExperienceEditor)return;var selectorArray=['#trip-keyword-hero','#trip-keyword-global'];var positionArray=['left','right'];ajaxTypeaheadDestinations("/destinationsearch/destination-suggestions",selectorArray,positionArray,true);var hasSuggestions=function(){var hasSug=false;var menu=$('li.ui-autocomplete-category')[0];if(menu){var menuItem=$(menu).children('a')[0];if(menuItem){hasSug=!(menuItem.innerHTML.trim()=="No Suggestions");}}
return hasSug;}
$('#search-button-hero').on('click',function(event){searchFromCarousel(event,hasSuggestions());});$('#search-button-menu').on('click',function(event){searchFromGlobalSearch(event,hasSuggestions());});$("#trip-keyword-hero").keypress(function(event){if(event.which==13){searchFromCarousel(event,hasSuggestions());}});$("#trip-keyword-global").keypress(function(event){if(event.which==13){searchFromGlobalSearch(event,hasSuggestions());}});});;(function(){let _config={selector:{globalNavControl:".js-toggle-gcc-nav",globalNavItem:".js-gcc-nav",control:".js-nav-sibling-control",siblingSubNav:".js-nav-sibling",activeParent:".js-nav-sibling-control.is-active",activeSubNavs:".js-nav-sibling.is-active",backButton:".js-back-nav",breakup:".js-nav-break-after",searchBar:".js-nav-search",controlMAC:".js-mac-toggle",macIcon:".js-mobile-mac-control",recentlyViewedSlider:".js-slick-nav-recently-viewed"},cssClass:{activeClass:"is-active",navSearch:"js-nav-search",noScrollClass:"noscroll"}};function updateNavHeight(){setTimeout(function(){var menuHeight=($(window).height()-$(_config.selector.globalNavItem).position().top);$(_config.selector.siblingSubNav).add(_config.selector.globalNavItem).css("height",menuHeight);},250);}
function resetNavHeight(){$(_config.selector.siblingSubNav).add(_config.selector.globalNavItem).removeAttr("style");}
function scrollToTopOfMenus(){$(_config.selector.globalNavItem).animate({scrollTop:0},100);$(_config.selector.siblingSubNav).each(function(){$(this).animate({scrollTop:0},100);});}
function enableBackgroundScroll(){$('body').removeClass(_config.cssClass.noScrollClass);}
function disableBackgroundScroll(){$('body').addClass(_config.cssClass.noScrollClass);}
function closeMobileMenu(){$(_config.selector.globalNavControl).removeClass(_config.cssClass.activeClass);$(_config.selector.globalNavItem).removeClass(_config.cssClass.activeClass);resetNavHeight();}
function openCloseMobileMenu(){$(_config.selector.globalNavControl).toggleClass(_config.cssClass.activeClass);$(_config.selector.globalNavItem).toggleClass(_config.cssClass.activeClass);}
function closeAllSubmenus(){$(_config.selector.control).removeClass(_config.cssClass.activeClass);$(_config.selector.siblingSubNav).removeClass(_config.cssClass.activeClass);}
function bindBackNaviationButton(){$(_config.selector.backButton).click(function(){let parent=$(this).parents(_config.selector.siblingSubNav).first();parent.removeClass(_config.cssClass.activeClass);parent.prev().removeClass(_config.cssClass.activeClass);parent.parent().removeClass(_config.cssClass.noScrollClass);});}
function openMobileNavSibling(control,subnav){scrollToTopOfMenus();control.addClass(_config.cssClass.activeClass);subnav.addClass(_config.cssClass.activeClass);control.parent().addClass(_config.cssClass.noScrollClass);subnav.removeClass(_config.cssClass.noScrollClass);}
function toggleMegaNavSubmenus(control,subnav){if(control.hasClass(_config.cssClass.activeClass)){control.removeClass(_config.cssClass.activeClass);$(_config.selector.siblingSubNav).removeClass(_config.cssClass.activeClass);}else{control.parent().find(_config.selector.activeParent).removeClass(_config.cssClass.activeClass);control.parent().find(_config.selector.activeSubNavs).removeClass(_config.cssClass.activeClass);control.addClass(_config.cssClass.activeClass);subnav.addClass(_config.cssClass.activeClass);var _siblingHasTertiary=subnav.find(_config.selector.siblingSubNav).length>0;if(_siblingHasTertiary){subnav.find(_config.selector.control).first().addClass(_config.cssClass.activeClass);subnav.find(_config.selector.siblingSubNav).first().addClass(_config.cssClass.activeClass);}}}
function bindOpenCloseSubNav(){$(_config.selector.control).click(function(event){var control=$(this);if(!control.hasClass("nav__autoevent--bind")){var subnav=control.next(_config.selector.siblingSubNav);var breakpoint=(gcc.responsive&&gcc.responsive.breakpoint)||undefined;if(breakpoint==="small"||breakpoint==="xsmall"||$(_config.selector.globalNavControl).hasClass(_config.cssClass.activeClass)){openMobileNavSibling(control,subnav);}else{toggleMegaNavSubmenus(control,subnav);}
if(control.hasClass(_config.cssClass.activeClass)&&!control.hasClass('nav__button-itinerary')){track6EventRule(control,true);}else if(control.hasClass(_config.cssClass.activeClass)&&control.hasClass('nav__button-itinerary')){track6EventRule(control,false);}else if(!control.hasClass(_config.cssClass.activeClass)&&control.hasClass('nav__button-itinerary')){track6EventRule(control,"itinerary");}else{track6EventRule(control,"scroll");}}});}
function toggleSearchBar(state){if(state==="on"){$(_config.selector.searchBar).prop('checked',true);document.querySelector(".js-tagline-container").classList.add("collapsed");document.querySelector(".global-header__search").classList.add("expand");}
if(state==="off"){$(_config.selector.searchBar).prop('checked',false);document.querySelector(".js-tagline-container").classList.remove("collapsed");document.querySelector(".global-header__search").classList.remove("expand");}}
function toggleMyAccountMenu(){if($(_config.selector.controlMAC).prop('checked')===true){$(_config.selector.controlMAC).prop('checked',false);}}
function breakUpNavigationItems(){if($(_config.selector.breakup).length){$(_config.selector.breakup).each(function(){let breakups={group:$(this).data('group'),title:$(this).data('title'),path:$(this).data('path')}
let listItems=[];listItems.push($(this).nextAll('li').clone());$(this).nextAll('li').addClass('hidden-sm-up');if(typeof breakups.path!=='undefined'&&breakups.path!=""){breakups.title='<a href="'+breakups.path+'">'+breakups.title+'</a>';}
$("<div class='hidden-sm-down nav__tertiarynav'><p class='nav__header fall-none headroom-none'>"+breakups.title+"</p><ul class='listless js-desktop-links-"+breakups.group+"' data-automation=\"nav:dest:destList\"></ul></div>").insertAfter($(this).parents('.js-nav-sibling'));for(let i=0;i<listItems.length;i++){$('.js-desktop-links-'+breakups.group).append(listItems[i]);}})}}
function bindBurger(){$(_config.selector.globalNavControl).click(function(){if($(this).hasClass(_config.cssClass.activeClass)){closeAllSubmenus();closeMobileMenu();enableBackgroundScroll();toggleSearchBar('off');}else{openCloseMobileMenu();updateNavHeight();disableBackgroundScroll();toggleSearchBar('on');toggleMyAccountMenu();}});}
function bindWindowResizeResetNav(){var resizeTimer;$(window).on('resize',function(e){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){var breakpoint=(gcc.responsive&&gcc.responsive.breakpoint)||undefined;var previousBreakpoint=(gcc.responsive&&gcc.responsive.previousBreakpoint)||undefined;if(previousBreakpoint!=breakpoint){enableBackgroundScroll();closeAllSubmenus();closeMobileMenu();}},250);});}
function bindMyAccountMobileOpen(){$(_config.selector.macIcon).click(function(){let isNavOpen=$(_config.selector.globalNavItem).hasClass(_config.cssClass.activeClass);if(isNavOpen){openCloseMobileMenu();closeAllSubmenus();toggleSearchBar('off');}})}
function slickSlidersInNav(){$(_config.selector.recentlyViewedSlider).slick({dots:true,infinite:false,speed:300,slidesToShow:1,slidesToScroll:1,mobileFirst:true,arrows:false,responsive:[{breakpoint:1000,settings:{slidesToShow:3,infinite:true,dots:true}},{breakpoint:600,settings:{slidesToShow:2,}},{breakpoint:1,settings:{slidesToShow:1,}}],onInit:fixHeaderHeight()});}
function fixHeaderHeight(){var headers=Array.from(document.getElementsByClassName("js-recent-trips-header"))
var headerHeight=0;headers.forEach(function(header,index,array){if(headerHeight<header.getBoundingClientRect().height){headerHeight=header.getBoundingClientRect().height;}
if(index===array.length-1){setHeight();}});function setHeight(){headers.forEach(function(header){header.style.height=headerHeight+'px';});}}
function bindMethodAjaxCall(){$('.js-nav-ajax-call').on('click',function(){var objThis=$(this);var $injector=angular.element($(document.body)).injector();if(objThis.hasClass('ajax-call-completed')){return;}
var url=$(this).attr("ajax-url")
var divResult=$(this).attr("ajax-result")
$.ajax({type:'GET',url:url,contentType:'application/html; charset=utf-8',dataType:"html",async:true,cache:true,success:function(response){$(divResult).empty();objThis.addClass("ajax-call-completed");$injector.invoke(['$rootScope','$compile',function($rootScope,$compile){$(divResult).html($compile(response)($rootScope));}]);setTimeout(function(){slickSlidersInNav();$(divResult).find('.slick-dots').css("position","static")},100);},failure:function(response){$(divResult).html(response.responseText);},error:function(response){$(divResult).html(response.responseText);}});});}
function bindCloseGlobalNavOnClick(){$(document).on('touchend click',function(e){if($(e.target).parents(".gcc-nav").length==0){var control=$(document).find(_config.selector.activeParent);var subnav=control.next(_config.selector.siblingSubNav);var breakpoint=(gcc.responsive&&gcc.responsive.breakpoint)||undefined;if(breakpoint!="small"||breakpoint!="xsmall"){toggleMegaNavSubmenus(control,subnav);}
track6EventRule(control,"scroll");}});}
function bindCloseGlobalNavOnScroll(){$(window).scroll(function(){var height=$(document).find(_config.selector.activeSubNavs).height();height=height==null?0:height;var siteHeaderHeight=$('.site-header').height();if(($(window).scrollTop()-siteHeaderHeight)>height){var control=$(document).find(_config.selector.activeParent);var subnav=control.next(_config.selector.siblingSubNav);var breakpoint=(gcc.responsive&&gcc.responsive.breakpoint)||undefined;track6EventRule(control,"scroll");if(breakpoint!="small"||breakpoint!="xsmall"){toggleMegaNavSubmenus(control,subnav);}}});}
function track6EventRule(control,override){if((override==true||override==="itinerary")&&override!=undefined){if($(document).find(_config.selector.activeParent).length>0){control=$(document).find(_config.selector.activeParent);subnav=$(document).find(_config.selector.activeSubNavs);}}
if(angular.element($(document.body)).injector()!==undefined){var analyticsService=angular.element($(document.body)).injector().get('GccAnalyticsService');var x={rule:gcc.cloud.analytics.RULE.TARGETPAGEEVENT,domElement:control,customClick:true,scrollEvent:override};analyticsService.trackRule(x)}}
function updateSigninMyAccountMenu(){if(gcc.profile&&gcc.profile.loggedin&&gcc.profile.loggedin.indexOf("rec:auth")>-1)
$("a.nav__button--primary[data-menu-name='sign-in']").remove();else
$("a.nav__button--primary[data-menu-name='view-my-account']").remove();}
bindBurger();bindOpenCloseSubNav();bindBackNaviationButton();bindWindowResizeResetNav();bindMyAccountMobileOpen();breakUpNavigationItems();bindMethodAjaxCall();bindCloseGlobalNavOnClick();bindCloseGlobalNavOnScroll();updateSigninMyAccountMenu();})();;define('GccLogin/components/ajaxLoader',[],function(){var ajaxLoader=function(){var _this=this;_this.showLoader=function(container){var ajaxContainer=container?container:'body';$('<div id="loading" class="ajax-update-overlay"></div>').appendTo($(ajaxContainer));}
_this.hideLoader=function(){$('.ajax-update-overlay').hide().remove();}};return ajaxLoader;});define('GccLogin/components/forgotCredentials',['GccLogin/components/ajaxLoader'],function(ajaxLoader){var forgotCredentials=function(){var _ajaxLoader=new ajaxLoader();var _this=this;_this.showPasswordModal=function(){$.ajax({type:"POST",async:false,url:"/account/forgot-password",success:function(response){$('#fpwd-modal-content').empty();$('#fpwd-modal-content').html(response);}});}
_this.showUsernamModal=function(){$.ajax({type:"POST",async:false,url:"/account/forgot-username",success:function(response){$('#fusr-modal-content').empty();$('#fusr-modal-content').html(response);}});}
_this.usernameReoverySuccess=function(resultModel,data){if(resultModel.CredentialsResponse=="Succes"){$("#username-success").show();$("#username-form").hide();}else if(resultModel.CredentialsResponse==="UserNameNotFound"||resultModel.CredentialsResponse==="IsLockedOut"){$("#error-message")[0].innerHTML=resultModel.ErrorMessage;$("#error-message").show();}else{$("#failure-message").show();}
_ajaxLoader.hideLoader();}
_this.usernameReoveryFailure=function(resultModel,data){$("#failure-message").show();_ajaxLoader.hideLoader();}
_this.passwordReoverySuccess=function(response){$('#fpwd-modal-content').empty();$('#fpwd-modal-content').html(response);_ajaxLoader.hideLoader();}
_this.passwordReoveryFailure=function(response){$('#fpwd-modal-content').empty();$('#fpwd-modal-content').html(response);_ajaxLoader.hideLoader();}
_this.passwordReoveryFinalStepSuccess=function(response){$('#updatepassword-modal').empty();$('#updatepassword-modal').html(response);_ajaxLoader.hideLoader();}
_this.passwordReoveryFinalStepFailure=function(response){$('#updatepassword-modal').empty();$('#updatepassword-modal').html(response);_ajaxLoader.hideLoader();}};return forgotCredentials;});define('GccLogin/components/processLogin',['GccLogin/components/ajaxLoader'],function(ajaxLoader){var loginProcessForm=function(){var _ajaxLoader=new ajaxLoader();var _this=this;_this.SignInPage=function(){function displayError(){$('div.input-validation-error').css("display","inherit");_ajaxLoader.hideLoader();}
if(!resultModel.ShowErrorMessage){setTimeout(function(){var url=resultModel.ReturnUrl;if(url.indexOf('/')===0){window.location.href=location.protocol+'//'+location.hostname+url;}else{window.location.href=location.protocol+'//'+location.hostname+"/"+url;}},1000);}else{displayError();}}
_this.signInModalSuccess=function(resultModel,data){$(".js-errorMessage p").html(resultModel.ErrorMessage);function displayError(){$('.js-errorMessage').css("display","block");_ajaxLoader.hideLoader();}
if(resultModel.IsSuccess){signInLinkdataAttributes.linkvalue='Sign in';signInLinkdataAttributes.customerNumber=resultModel.CustomerNumber?resultModel.CustomerNumber:'';signInLinkdataAttributes.recognitionStatus=resultModel.RecognitionStatus?resultModel.RecognitionStatus:'';if(typeof gcc.isLMSSignInPage!=='undefined'&&gcc.isLMSSignInPage===true&&typeof gcc.isGlobalHeaderLoginClick!=='undefined'&&gcc.isGlobalHeaderLoginClick===false){signInLinkdataAttributes.modalDescription='lms:mdl_signin';}
window.analyticsBridge.TrackSignInSuccess(signInLinkdataAttributes);var url=resultModel.ReturnUrl;if(typeof window.ForumReturnUrl!='undefined'&&window.ForumReturnUrl){url=window.ForumReturnUrl;}
if(url.indexOf('/')===0){window.location.href=location.protocol+'//'+location.hostname+url;}else{window.location.href=location.protocol+'//'+location.hostname+"/"+url;}
if(window.location.href.indexOf("travel-forum")>0){location.reload(true);}}
else{displayError();window.analyticsBridge.TrackSigninFailure();}}
_this.signInModalFailure=function(resultModel,data){function displayError(){$('.js-errorMessage').css("display","block");_ajaxLoader.hideLoader();}
displayError();if($('#IsAutomated').length){$('#IsAutomated').val('false');}
if($('#IsAutomated2').length){$('#IsAutomated2').val('false');}
if($('#AutomationKey').length){$('#AutomationKey').val('');}
if($('#AutomationKey2').length){$('#AutomationKey2').val('');}
window.analyticsBridge.TrackSigninFailure();}};return loginProcessForm;});define('GccLogin/components/ajaxHelper',['GccLogin/components/forgotCredentials','GccLogin/components/processLogin'],function(forgotCredentials,processLogin){var ajaxHelper=function(){var _forgotCredentials=new forgotCredentials();var _processLogin=new processLogin();var _this=this;_this.initSignInModal=function(resultModel,data){_ajaxRequireHelper.signInModalBegin=function(){gcc.showLoader('#modal-signin');}
_ajaxRequireHelper.signInModalSuccess=function(resultModel,data){_processLogin.signInModalSuccess(resultModel,data);}
_ajaxRequireHelper.signInModalFailure=function(resultModel,data){_processLogin.signInModalFailure(resultModel,data);}}
_this.initPasswordReovery=function(resultModel,data){_ajaxRequireHelper.passwordReoveryBegin=function(){gcc.showLoader('#forgot-password');}
_ajaxRequireHelper.passwordReoverySuccess=function(resultModel,data){_forgotCredentials.passwordReoverySuccess(resultModel,data);}
_ajaxRequireHelper.passwordReoveryFailure=function(resultModel,data){_forgotCredentials.passwordReoveryFailure(resultModel,data);}
_ajaxRequireHelper.passwordReoveryFinalStepSuccess=function(resultModel,data){_forgotCredentials.passwordReoveryFinalStepSuccess(resultModel,data);}
_ajaxRequireHelper.passwordReoveryFinalStepFailure=function(resultModel,data){_forgotCredentials.passwordReoveryFinalStepFailure(resultModel,data);}}
_this.initUsernameReovery=function(resultModel,data){_ajaxRequireHelper.usernameReoveryBegin=function(){gcc.showLoader('#forgot-username');}
_ajaxRequireHelper.usernameReoverySuccess=function(resultModel,data){_forgotCredentials.usernameReoverySuccess(resultModel,data);}
_ajaxRequireHelper.usernameReoveryFailure=function(resultModel,data){_forgotCredentials.usernameReoveryFailure(resultModel,data);}}};return ajaxHelper;});define('Angular/components/utils',[],function(){function isAngularLoaded(){if(angular&&angular.element($(document.body))&&angular.element($(document.body)).injector()){return true;}else{return false;}}
function angularIsReady(debugSource){var d=new $.Deferred();if(isAngularLoaded()){d.resolve();}else{var timeout=10000;var interval=setInterval(function(){if(isAngularLoaded()){d.resolve("Angular code is loaded");clearInterval(interval);}else if(timeout<0){d.reject("Error: Angular code failed to load. Debug Source="+debugSource);clearInterval(interval);}else{timeout=timeout-100;d.notify("Warn: Angular code is not loaded yet. Retrying...timeout="+timeout+" - Debug Source:"+debugSource);}},100);}
return d.promise();}
var refreshAngularClass='angularRefreshAfterAjax';function wrapInAngularRefresh(htmlData){var wrapper=$('<div class="'+refreshAngularClass+'">');wrapper.html(htmlData);return wrapper;}
function refreshAngular(selector,refreshAngularCustomClass){$.when(angularIsReady('refreshAngular')).then(function(message){selector=(selector?selector+" ":"")+"."+refreshAngularClass;if(refreshAngularCustomClass)selector=refreshAngularCustomClass;$(selector).each(function(){var content=$(this);angular.element($(document.body)).injector().invoke(['$compile',function($compile){var scope=angular.element(content).scope();$compile(content)(scope);}]);});},function(error){throw new Error(error);},function(message){});}
return{isAngularLoaded:isAngularLoaded,angularIsReady:angularIsReady,refreshAngular:refreshAngular,wrapInAngularRefresh:wrapInAngularRefresh}});define('SitecoreExtensions/components/ajaxLoader',['Angular/components/utils'],function(angularUtils){var ajaxLoaderModule=function(){var _this=this;_this.loadPartial=function(partial,container,callback)
{if(container==".js-trip-ajax-main"||container=="#TripBuilderContainer"){_this.ajaxLoaderShow(container);$.get(partial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(container,newData,callback);});break;default:_this.loadHtml(container,data,callback);if($("#hidShowFeatured").val()=="true"){$(".slat-sub-section .trip-link").first().click();}
break;}}).fail(function(){_this.ajaxLoaderHide();});}else{var parentPartialSplitted=(window.location.pathname+window.location.search).split('/');var parentPartial=parentPartialSplitted.slice(0,6).join('/')+"/web content/"+parentPartialSplitted.slice(6,8).join('/');var parentContainer='js-trip-ajax-main';_this.ajaxLoaderShow(parentContainer);$.get(parentPartial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(parentContainer,newData,callback);});break;default:_this.loadHtml(parentContainer,data,function(){});_this.ajaxLoaderShow(container);var partialSplitted=partial.split('/');if(partialSplitted.length>=10){partial=partialSplitted.slice(0,5).join('/');switch(partialSplitted[8]){case "featured articles":partial+="/FeaturedArticles/";break;case "historycultureandmore":partial+="/History-Culture-and-More/";break;}
partial+=partialSplitted[9];}
$.get(partial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(container,newData,callback);});break;default:_this.loadHtml(container,data,callback);break;}});break;}});}}
_this.loadHtml=function(container,data,callback){_this.ajaxLoaderHide();$(container).html(angularUtils.wrapInAngularRefresh(data));angularUtils.refreshAngular(container);callback();}
_this.ajaxLoaderShow=function(container){var ajaxContainer=container?container:'body';$('<div class="ajax-loader-wrap" id="ajaxLoader" style="top:'+$(ajaxContainer).position().top+'px; z-index:9999; min-height:100px; height:'+$(ajaxContainer).outerHeight()+'px; position:absolute;"><img id="loadingImg" src="/Content/images/global/ajax-loader.gif" style="top:35%" /></div>').appendTo($(ajaxContainer));}
_this.ajaxLoaderHide=function(){$('#ajaxLoader').hide().remove();}};return ajaxLoaderModule;});require(['GccLogin/components/ajaxHelper','GccLogin/components/forgotCredentials','SitecoreExtensions/components/ajaxLoader'],function(ajaxHelper,forgotCredentials,ajaxLoader){var _ajaxHelper=new ajaxHelper();var _forgotCredentials=new forgotCredentials();var _ajaxLoader=new ajaxLoader();let _config={selector:{forgotPasswordModal:'#forgotpasswordmodal',forgotUsername:'#forgotusername',signInModalContent:'#signin-modal-content'}};if($.validator&&$.validator.unobtrusive){$.validator.unobtrusive.parse("#forgot-pswd-recovery-form");$.validator.unobtrusive.parse("#forgot-pswd-form");$.validator.unobtrusive.parse("#change-pwd");$.validator.unobtrusive.parse("#forgot-username");}
_ajaxHelper.initSignInModal();_ajaxHelper.initPasswordReovery();_ajaxHelper.initUsernameReovery();$(document).on("click","#fpwd-modal-close",function(event){_forgotCredentials.showPasswordModal();});$(document).on("click","#fusr-modal-close",function(event){_forgotCredentials.showUsernamModal();});$(document).on("click",'a[href="'+_config.selector.forgotPasswordModal+'"]',function(event){_forgotCredentials.showPasswordModal();});$(document).on("click",'a[href="'+_config.selector.forgotUsername+'"]',function(event){_forgotCredentials.showUsernamModal();});$(document).off('click','.js-password-toggle',passwordToggle).on('click','.js-password-toggle',passwordToggle);function passwordToggle(event){var passwordToggleElement=$(this);var labelDisplay=passwordToggleElement.data('display');var labelHidden=passwordToggleElement.data('hidden');var password=passwordToggleElement.prev('.js-password');if(password.attr('type')==="text"){password.attr('type','password');passwordToggleElement.text(labelDisplay);}else{password.attr('type','text');passwordToggleElement.text(labelHidden);}
event.stopImmediatePropagation();}
$(document).on("click",'#multiple-users-submit',function(event){if($('input[id^=SelectedUserName_]:checked').length===0){event.preventDefault();$("#multiple-users-error").show();}});$(document).on("click",'input[id^=SelectedUserName_]',function(event){$("#multiple-users-error").hide();});$(document).on("click",'a[href="#registermodal"]',function(event){var _this=this;var isGlobalHeaderRegister=$(_this).attr('gcc-link-tracker')==="register-global-header";if(isGlobalHeaderRegister){gcc.isGlobalHeaderLoginClick=true;}});$(document).on("click",'a[href="#signinmodal"]',function(event){getSignInModalContent(event);});$(document).ready(function(){if(window.location.href.toLowerCase().includes("#signinmodal")){setTimeout(function(){triggerSignIn();},500);}
if(window.location.href.toLowerCase().includes("#forgotpasswordmodal")){_forgotCredentials.showPasswordModal();}
if(window.location.href.toLowerCase().includes("#forgotusername")){_forgotCredentials.showUsernamModal();}});window.onBeginModalSignin=function(){_ajaxLoader.ajaxLoaderShow("body");}
window.processPageSignin=function(resultModel,data){if(!resultModel.ShowErrorMessage){if(data=='success'){if(typeof gcc.isLMSSignInPage!=='undefined'&&gcc.isLMSSignInPage===true){signInLinkdataAttributes=$.extend({},$(event.target).data());signInLinkdataAttributes.modalDescription="lms";signInLinkdataAttributes.linkvalue='Sign in';signInLinkdataAttributes.customerNumber=resultModel.CustomerNumber?resultModel.CustomerNumber:'';signInLinkdataAttributes.recognitionStatus=resultModel.RecognitionStatus?resultModel.RecognitionStatus:'';window.analyticsBridge.TrackSignInSuccess(signInLinkdataAttributes);}}
_ajaxLoader.ajaxLoaderHide();var url=resultModel.ReturnUrl;if(url.indexOf('/')===0){window.location.href=location.protocol+'//'+location.hostname+url;}else{window.location.href=location.protocol+'//'+location.hostname+"/"+url;}}
else{$('.js-loginpage-error p').html(resultModel.ErrorMessage);if($("#IsAutomated").length){$('#IsAutomated').val('false');}
if($("#IsAutomated2").length){$('#IsAutomated2').val('false');}
processPageFailure();}};window.processPageFailure=function(resultModel){$('div.input-validation-error').css("display","inherit");_ajaxLoader.ajaxLoaderHide();}
function triggerSignIn(){$('a[href="#signinmodal"]').trigger("click");}
function getSignInModalContent(event){var _this=this;signInLinkdataAttributes=$.extend({},$(event.target).data());signInLinkdataAttributes.isGlobalModalSignIn=true;var _configLocations={isGlobalHeader:$(_this).attr('gcc-link-tracker')==="sign-in-global-header",isSweepstakes:$(_this).hasClass('js-sweeps-signin'),isGlobalAlertPrompt:$(_this).hasClass('js-sign-in-prompt-btn'),isFromRegisterForm:$(_this).hasClass('js-register-modal-signin-link'),isProductTravelerReview:$(_this).hasClass('js-trvlrrev-signin')}
if(_configLocations.isGlobalHeader){gcc.isGlobalHeaderLoginClick=true;signInLinkdataAttributes.modalDescription="mdl_signin";signInLinkdataAttributes.linkAction="click-sign-in-global-header";}
else if(_configLocations.isGlobalAlertPrompt){gcc.isGlobalHeaderLoginClick=true;signInLinkdataAttributes.modalDescription="mdl_signin";signInLinkdataAttributes.linkAction="glbmac_msgalertmdl_unrec-signin";}
else if(_configLocations.isSweepstakes){signInLinkdataAttributes.modalDescription="mdl_signin_swps";signInLinkdataAttributes.linkAction="swpspg_noauth";}
else if(_configLocations.isFromRegisterForm){signInLinkdataAttributes.modalDescription="mdl_signin";signInLinkdataAttributes.linkAction="mdl_mac_smplreg";}
else if(_configLocations.isProductTravelerReview){signInLinkdataAttributes.modalDescription="mdl_signin";signInLinkdataAttributes.linkAction="mdl_trvlrrev";}else{signInLinkdataAttributes.modalDescription="mdl_signin";signInLinkdataAttributes.linkAction="mdl_other";}
window.analyticsBridge.TrackSignIn(signInLinkdataAttributes);$.ajax({type:"POST",async:false,url:"/account/login-modal",success:function(response){$(_config.selector.signInModalContent).empty();$(_config.selector.signInModalContent).html(response);setTimeout(function(){$('#signinmodal input#Username').focus();},500);var isSoloAvailability=$(_this).attr('gcc-link-tracker')==="dandp-signin";var returnUrl=window.location.href.replace(window.location.origin,"").replace(window.location.hash,"");if(isSoloAvailability){var header=$("#signin-header-txt").val();$("#signin-header").empty().html(header);returnUrl+="#single-space-modal";$("#signin-return-url").attr('value',returnUrl);}else{var headerText=$("#signin-header-txt").val();$("#signin-header").empty().html(headerText);$("#signin-return-url").attr('value',returnUrl);}},failure:function(response){console.log(response.responseText);},error:function(response){console.log(response.responseText);}});}});define("GccLogin/main",function(){});var openReviewModal=function reviewModal(){$.ajax({type:"POST",url:"/api/sitecore/Registration/registerstepone",success:function(response){$('#register-modal-content').empty().html(response);}});};$(document).on("click","#register-modal",function(event){if(window.analyticsBridge)
gcc.isGlobalHeaderLoginClick=false;window.analyticsBridge.TrackSimplifiedRegistrationStart();openReviewModal();});$(document).on("click",".js-enter.js-sweeps-register",function(event){if(window.analyticsBridge){var options={linkAction:"swpspg_noauth"}
window.analyticsBridge.TrackSimplifiedRegistrationStart(options);}
openReviewModal();});$(document).on("click","#signmodal-register",function(event){if(window.analyticsBridge)
window.analyticsBridge.TrackSimplifiedRegistrationStart();openReviewModal();});$(document).on("click","#close-register-modal",function(event){openReviewModal();});$(document).on("keyup","#EmailAddress,#PhoneNumber,#CustomerNumber",function(event){$("#email-required-error").hide();$("#phone-required-error").hide();$("#customer-number-required-error").hide();$('.customer-no-error').hide();$('.register-failure').hide();$(".js-account-exists").hide();});var openConfirmEmailAddressModal=function openConfirmEmailModal(registerBy){$.ajax({type:"POST",url:"/api/sitecore/Registration/confirmemailaddress",success:function(response){$("#register-modal-content").empty();$("#register-modal-content").append(response);}});};var openRequiredEmailModal=function(registerOption,customerNumber){$.ajax({type:"POST",url:"/api/sitecore/Registration/requireemailaddress",success:function(response){$("#register-modal-content").empty();$("#register-modal-content").append(response);if(window.analyticsBridge){window.analyticsBridge.publishAudit("MacSmplReg","MacSmplReg |EmlNotFound MACnotexists  for "+registerOption+" Lookup | "+customerNumber,{ModalDesc:"mdl_mac_smplreg",isSimplifiedRegistration:true});window.analyticsBridge.TrackOpenModalEvent({modalReqType:"mdl_mac_smplreg_call_needeml"});}}});};var openSentEmailConfirmationModal=function(email,customerNumber,registerOption){$.ajax({type:"POST",url:"/api/sitecore/Registration/sentregistrationconfirmationemail",data:{email:email,customerNumber:customerNumber},success:function(response){$("#register-modal-content").empty();$("#register-modal-content").append(response);if(window.analyticsBridge){window.analyticsBridge.publishAudit("MacSmplReg","MacSmplReg |EmlFound MACnotexists for "+registerOption+" Lookup | "+customerNumber,{ModalDesc:"mdl_mac_smplreg",isSimplifiedRegistration:true});window.analyticsBridge.TrackOpenModalEvent({modalReqType:"mdl_mac_smplreg_almstthere"});}}});};function onBeginRegister(){checkValidation();if(checkValidation()===true){ajaxLoaderShow();$(".customer-no-error").hide();$(".register-failure").hide();}else{return false;}};var setEmailFromRegStepOne=function(regStepOneEmail){$('.js-from-step-one').val(regStepOneEmail);}
var openNextStepRegisterModal=function(regStepOneEmail,registeredBy){$.ajax({type:"POST",url:"/api/sitecore/Registration/registernextstep",success:function(response){$("#register-modal-content").empty();$("#register-modal-content").append(response);if(window.analyticsBridge){window.analyticsBridge.publishAudit("MacSmplReg","MacSmplReg |  ALLnotexists for "+registeredBy+" Lookup | notexists",{ModalDesc:"mdl_mac_smplreg",isSimplifiedRegistration:true});window.analyticsBridge.TrackOpenModalEvent({modalReqType:"mdl_mac_smplreg_nxtstp"});}
setEmailFromRegStepOne(regStepOneEmail);}});}
var openSignModal=function(accountAlreadyExists){$.ajax({type:"POST",url:'/api/sitecore/Registration/registermodalsignin_DOES-NOT-WORK/BUT-NOT-USED',data:{accountAlreadyExists:accountAlreadyExists},success:function(response){$("#register-modal-content").empty();$("#register-modal-content").append(response);}});};function processRegister(registerResult,data){ajaxLoaderHide();if(registerResult!=null&&registerResult.IsSuccess){if(registerResult.ModalToDisplay==="ConfirmEmailAddress"){openConfirmEmailAddressModal(registerResult.RegisteredByForAnalytics);}
if(registerResult.ModalToDisplay==="EmailAddressRequired"){openRequiredEmailModal(registerResult.RegisteredByForAnalytics,registerResult.CustomerNumber);}
if(registerResult.ModalToDisplay==="SentRegistrationEmail"){openSentEmailConfirmationModal(registerResult.EmailAddress,registerResult.CustomerNumber,registerResult.RegisteredByForAnalytics);}
if(registerResult.ModalToDisplay==="RegisterNextStep"){var regStepOneEmail="";if($('[data-option="Email"] input').val()!=""){regStepOneEmail=$('[data-option="Email"] input').val();}
openNextStepRegisterModal(regStepOneEmail,registerResult.RegisteredByForAnalytics);}
if(registerResult.ModalToDisplay==="SignIn"){if(window.analyticsBridge)
window.analyticsBridge.publishAudit("MacSmplReg","MacSmplReg | EmlFound MACexists for Eml Lookup | "+registerResult.CustomerNumber,{CustomerNumber:registerResult.CustomerNumber,ModalDesc:"mdl_mac_smplreg",isSimplifiedRegistration:true});$('.js-account-exists').show();if(window.analyticsBridge)
window.analyticsBridge.TrackOpenModalEvent({modalReqType:"mdl_mac_smplreg_macexists"});}}
else if(registerResult!=null&&registerResult.IsInvalidCustomerNumber==true){$(".customer-no-error").show();}};function registrationFailure(){$(".register-failure").show();ajaxLoaderHide();}
function ajaxLoaderShow(container){var ajaxContainer=container?container:'body';$('<div class="ajax-loader-wrap" id="ajaxLoader"><img src="/Content/images/global/ajax-loader.gif" /></div>').appendTo($(ajaxContainer));}
function ajaxLoaderHide(){$('#ajaxLoader').hide().remove();$('.ajax-update-overlay').hide();}
function updateOnAjaxFormFailure(xhr){if(xhr.status===500){ajaxLoaderHide('#module-form');$('.ajax-update-overlay').hide();$('#divServerErrors').html('<p><strong>An error occurred during the processing of your request. Please try again.</strong></p>');$('#divServerErrors').show();}}
function checkValidation(){$("#email-required-error").hide();$("#phone-required-error").hide();$("#customer-number-required-error").hide();var selectedOptionValue=$(".js-register-by-option:checked").attr('Value');if(selectedOptionValue==="Email"&&!$("#EmailAddress").val()){$("#email-required-error").show();return false;}else if(selectedOptionValue==="Phone"&&!$("#PhoneNumber").val()){$("#phone-required-error").show();return false;}else if(selectedOptionValue==="CustomerNumber"&&!$("#CustomerNumber").val()){$("#customer-number-required-error").show();return false;}
return true;};$(document).ready(function(){var clearValidation=function(){$('.field-validation-error').empty();$('.input-validation-error').removeClass('input-validation-error');$('.customer-no-error').hide();$('.register-failure').hide();$(".js-account-exists").hide();$("#email-required-error").hide();$("#phone-required-error").hide();$("#customer-number-required-error").hide();}
var showSelectedOptionInput=function(selectedOption){var selectedInput=$('[data-option="'+selectedOption+'"]');$(".js-toggle-option").attr('hidden','hidden');$(selectedInput).removeAttr('hidden');};var findCustomerNumberModal=function(){$.ajax({type:"POST",async:false,url:"/api/sitecore/Registration/findcustomernumber",success:function(response){$('#register-modal-content').empty().html(response);}});};function returnToRegistrationModal(){$.ajax({type:"POST",async:false,url:"/api/sitecore/Registration/registerstepone",success:function(response){$('#register-modal-content').empty().html(response);}});};$(document).on('click',".js-register-by-option",function(){var selectedOptionValue=$(this).attr('Value');showSelectedOptionInput(selectedOptionValue);clearValidation();$('.phone-number').mask('(999) 999-9999',{placeholder:'_',autoclear:false});});$(document).on('click',".js-find-customer-num",function(){if(window.analyticsBridge)
window.analyticsBridge.TrackComponentClick({componentName:'MAC SmplReg:find cust num modal:open',linkValue:'mdl_mac_smplreg'});findCustomerNumberModal();});$(document).on('click',".js-go-to-register",function(){returnToRegistrationModal();});$(document).on('click','.gcc-modal-close',clearValidation);});if($.validator&&$.validator.unobtrusive){$.validator.unobtrusive.parse("#registration-form");}
$(document).ready(function(){$('.phone-number').mask('(999) 999-9999',{placeholder:'_',autoclear:false});});;define('Angular/components/utils',[],function(){function isAngularLoaded(){if(angular&&angular.element($(document.body))&&angular.element($(document.body)).injector()){return true;}else{return false;}}
function angularIsReady(debugSource){var d=new $.Deferred();if(isAngularLoaded()){d.resolve();}else{var timeout=10000;var interval=setInterval(function(){if(isAngularLoaded()){d.resolve("Angular code is loaded");clearInterval(interval);}else if(timeout<0){d.reject("Error: Angular code failed to load. Debug Source="+debugSource);clearInterval(interval);}else{timeout=timeout-100;d.notify("Warn: Angular code is not loaded yet. Retrying...timeout="+timeout+" - Debug Source:"+debugSource);}},100);}
return d.promise();}
var refreshAngularClass='angularRefreshAfterAjax';function wrapInAngularRefresh(htmlData){var wrapper=$('<div class="'+refreshAngularClass+'">');wrapper.html(htmlData);return wrapper;}
function refreshAngular(selector,refreshAngularCustomClass){$.when(angularIsReady('refreshAngular')).then(function(message){selector=(selector?selector+" ":"")+"."+refreshAngularClass;if(refreshAngularCustomClass)selector=refreshAngularCustomClass;$(selector).each(function(){var content=$(this);angular.element($(document.body)).injector().invoke(['$compile',function($compile){var scope=angular.element(content).scope();$compile(content)(scope);}]);});},function(error){throw new Error(error);},function(message){});}
return{isAngularLoaded:isAngularLoaded,angularIsReady:angularIsReady,refreshAngular:refreshAngular,wrapInAngularRefresh:wrapInAngularRefresh}});define('SitecoreExtensions/components/ajaxLoader',['Angular/components/utils'],function(angularUtils){var ajaxLoaderModule=function(){var _this=this;_this.loadPartial=function(partial,container,callback)
{if(container==".js-trip-ajax-main"||container=="#TripBuilderContainer"){_this.ajaxLoaderShow(container);$.get(partial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(container,newData,callback);});break;default:_this.loadHtml(container,data,callback);if($("#hidShowFeatured").val()=="true"){$(".slat-sub-section .trip-link").first().click();}
break;}}).fail(function(){_this.ajaxLoaderHide();});}else{var parentPartialSplitted=(window.location.pathname+window.location.search).split('/');var parentPartial=parentPartialSplitted.slice(0,6).join('/')+"/web content/"+parentPartialSplitted.slice(6,8).join('/');var parentContainer='js-trip-ajax-main';_this.ajaxLoaderShow(parentContainer);$.get(parentPartial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(parentContainer,newData,callback);});break;default:_this.loadHtml(parentContainer,data,function(){});_this.ajaxLoaderShow(container);var partialSplitted=partial.split('/');if(partialSplitted.length>=10){partial=partialSplitted.slice(0,5).join('/');switch(partialSplitted[8]){case "featured articles":partial+="/FeaturedArticles/";break;case "historycultureandmore":partial+="/History-Culture-and-More/";break;}
partial+=partialSplitted[9];}
$.get(partial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(container,newData,callback);});break;default:_this.loadHtml(container,data,callback);break;}});break;}});}}
_this.loadHtml=function(container,data,callback){_this.ajaxLoaderHide();$(container).html(angularUtils.wrapInAngularRefresh(data));angularUtils.refreshAngular(container);callback();}
_this.ajaxLoaderShow=function(container){var ajaxContainer=container?container:'body';$('<div class="ajax-loader-wrap" id="ajaxLoader" style="top:'+$(ajaxContainer).position().top+'px; z-index:9999; min-height:100px; height:'+$(ajaxContainer).outerHeight()+'px; position:absolute;"><img id="loadingImg" src="/Content/images/global/ajax-loader.gif" style="top:35%" /></div>').appendTo($(ajaxContainer));}
_this.ajaxLoaderHide=function(){$('#ajaxLoader').hide().remove();}};return ajaxLoaderModule;});require(['SitecoreExtensions/components/ajaxLoader'],function(ajaxLoader){var _ajaxLoader=new ajaxLoader();$(document).ready(function(){$(window).on('hashchange',function(){if(window.location.hash==="#signinmodalextrf-close"||window.location.hash==="#signinmodal-close"){history.pushState("",document.title,window.location.pathname+window.location.search);}});});window.onBeginModalSignin=function(){$('#social-sign-in-error-message').css("display","none");$("#signinmodalextrf").css("z-index","1000");_ajaxLoader.ajaxLoaderShow("body");$("#loadingImg").css("position","fixed");}
window.processSignin=function(resultModel,data){if(resultModel.IsSuccess){setTimeout(function(){window.location.reload();},1000);}
else{$('#social-sign-in-error-message').css("display","block");_ajaxLoader.ajaxLoaderHide();}};window.processFailure=function(resultModel){$('#social-sign-in-error-message').css("display","block");_ajaxLoader.ajaxLoaderHide();}});define("GccLoginSocialSignIn/main",function(){});define('Angular/components/utils',[],function(){function isAngularLoaded(){if(angular&&angular.element($(document.body))&&angular.element($(document.body)).injector()){return true;}else{return false;}}
function angularIsReady(debugSource){var d=new $.Deferred();if(isAngularLoaded()){d.resolve();}else{var timeout=10000;var interval=setInterval(function(){if(isAngularLoaded()){d.resolve("Angular code is loaded");clearInterval(interval);}else if(timeout<0){d.reject("Error: Angular code failed to load. Debug Source="+debugSource);clearInterval(interval);}else{timeout=timeout-100;d.notify("Warn: Angular code is not loaded yet. Retrying...timeout="+timeout+" - Debug Source:"+debugSource);}},100);}
return d.promise();}
var refreshAngularClass='angularRefreshAfterAjax';function wrapInAngularRefresh(htmlData){var wrapper=$('<div class="'+refreshAngularClass+'">');wrapper.html(htmlData);return wrapper;}
function refreshAngular(selector,refreshAngularCustomClass){$.when(angularIsReady('refreshAngular')).then(function(message){selector=(selector?selector+" ":"")+"."+refreshAngularClass;if(refreshAngularCustomClass)selector=refreshAngularCustomClass;$(selector).each(function(){var content=$(this);angular.element($(document.body)).injector().invoke(['$compile',function($compile){var scope=angular.element(content).scope();$compile(content)(scope);}]);});},function(error){throw new Error(error);},function(message){});}
return{isAngularLoaded:isAngularLoaded,angularIsReady:angularIsReady,refreshAngular:refreshAngular,wrapInAngularRefresh:wrapInAngularRefresh}});define('Analytics/components/AnalyticsBridge',['Angular/components/utils'],function(angularUtils){var analyticsBridge=function(){var _this=this;var _analyticsService;function getAnalyticsService(){if(_analyticsService===undefined)
_analyticsService=angular.element($(document.body)).injector().get('GccAnalyticsService');}
_this.init=function(){window.analyticsBridge=_this;if(window.analyticsQueue){for(var i=0;i<window.analyticsQueue.length;i++){_this[window.analyticsQueue[i].functionName].apply(this,window.analyticsQueue[i].args);}
window.analyticsQueue=[];}};_this.trackPageView=function(params){$.when(angularUtils.angularIsReady('trackPageView')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'PageView',componentName:(params&&params.componentName)?params.componentName:'',componentAction:(params&&params.componentAction)?params.componentAction:'',tripCode:(params&&params.TripCode)?params.TripCode:'',tripYear:(params&&params.TripYear)?params.TripYear:'',searchInitiatedFrom:(params&&params.searchInitiatedFrom)?params.searchInitiatedFrom:'',searchInitiatedBy:(params&&params.searchInitiatedBy)?params.searchInitiatedBy:'',previousSearchParams:(params&&params.previousSearchParams)?params.previousSearchParams:''});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackComponentClick=function(params){if(gcc.featureFlags.event29==="True")return;$.when(angularUtils.angularIsReady('TrackComponentClick')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'ComponentClick',componentName:(params&&params.componentName)?params.componentName:'',componentAction:(params&&params.componentAction)?params.componentAction:'',tripCode:(params&&params.TripCode)?params.TripCode:'',tripYear:(params&&params.TripYear)?params.TripYear:'',tipGuid:(params&&params.tipGuid)?params.tipGuid:'',componentHasDesc:(params&&typeof(params.componentHasDesc)!=="undefined")?''+params.componentHasDesc:'',linkValue:(params&&params.linkValue)?params.linkValue:'',linkName:(params&&params.linkName)?params.linkName:'',currentVideo:(params&&params.currentVideo)?params.currentVideo:'',impressionDesc:(params&&params.impressionDesc)?params.impressionDesc:'',domElement:(params&&params.domElement)?params.domElement:'',currentRecommendedVideo:(params&&params.currentRecommendedVideo)?params.currentRecommendedVideo:'',selectedRecommendedVideo:(params&&params.selectedRecommendedVideo)?params.selectedRecommendedVideo:'',videoGuid:(params&&params.videoGuid)?params.videoGuid:''});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.publishAudit=function(auditName,auditValue,auditExtras){$.when(angularUtils.angularIsReady('publishAudit')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'Audit',auditName:auditName,auditValue:auditValue,tripCode:(auditExtras&&auditExtras.TripCode)?auditExtras.TripCode:'',tripYear:(auditExtras&&auditExtras.TripYear)?auditExtras.TripYear:'',customerNumber:(auditExtras&&auditExtras.CustomerNumber)?auditExtras.CustomerNumber:'',modalDesc:(auditExtras&&auditExtras.ModalDesc)?auditExtras.ModalDesc:'',isSimplifiedRegistration:auditExtras&&auditExtras.isSimplifiedRegistration,isTrackModalCombined:auditExtras&&auditExtras.isTrackModalCombined});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSignIn=function(options){$.when(angularUtils.angularIsReady('TrackSignIn')).then(function(message){getAnalyticsService();if(_analyticsService){if(options&&options.tpActionName){_analyticsService.trackRule({rule:'TravelPlannerAction',actionName:options.tpActionName,actionValue:options.tpActionValue});}
_analyticsService.trackRule({rule:'Signin',options:options});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSignInSuccess=function(options){$.when(angularUtils.angularIsReady('TrackSignInSuccess')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SigninSuccess',options:options});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSigninFailure=function(){$.when(angularUtils.angularIsReady('TrackSignInFailure')).then(function(message){var options={};options.description="mdl_signin";getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SigninFailure',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.addTertiary=function(id){if(id&&typeof gcc!="undefined"&&gcc.page&&gcc.page.pageName){var items=gcc.page.pageName.split(':').slice(0,6);items.push(id);gcc.page.pageName=items.join(':');}}
_this.trackEvent=function(eventName){$.when(angularUtils.angularIsReady('trackEvent')).then(function(message){getAnalyticsService();if(_analyticsService){var x={rule:eventName};_analyticsService.trackRule(x);}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.trackLinkEvent=function(params){if(gcc.featureFlags.event29==="True")return;$.when(angularUtils.angularIsReady('trackLinkEvent')).then(function(message){getAnalyticsService();var x={rule:'Link',action:'execute',icid:params.icid};_analyticsService.trackRule(x);},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackOpenModalEvent=function(params){$.when(angularUtils.angularIsReady('TrackOpenModalEvent')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'OpenModal',modalReqType:(params&&params.modalReqType)?params.modalReqType:'',tripCode:(params&&params.tripCode)?params.tripCode:'',tripYear:(params&&params.tripYear)?params.tripYear:'',resId:(params&&params.resId)?params.resId:'',tripBrand:(params&&params.tripBrand)?params.tripBrand:'',isAirItinerary:(params&&params.isAirItinerary)?params.isAirItinerary:'',isImpressionEvent:(params&&params.isImpressionEvent)?params.isImpressionEvent:false,dayPersName:(params&&params.dayPersName)?params.dayPersName:''});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSimplifiedRegistrationStart=function(options){options=options||{};options.description="mdl_mac_smplreg";$.when(angularUtils.angularIsReady('TrackSimplifiedRegistrationStart')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SimplifiedRegistrationStart',options:options});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TpcInterestBrowsingEvent=function tpcInterestBrowsingEvent(eventName,customerNumber,tripCode,tripYear,tripBrand,country){$.when(angularUtils.angularIsReady('TpcInterestBrowsingEvent')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'InterestBrowse',formName:eventName,customerNumber:customerNumber,country:country,tripCode:tripCode,tripBrand:tripBrand,tripYear:tripYear});}},function(error){throw new Error(error);},function(message){});}
_this.publishTpcBrowsingEvent=function(eventName,tripCode,tripYear,customerNumber){$.when(angularUtils.angularIsReady('publishTpcBrowsingEvent')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'Tpc1minGeneric',formName:eventName,tripCode:tripCode,tripYear:tripYear,customerNumber:customerNumber});}},function(error){throw new Error(error);},function(message){});}
_this.trackFormShow=function(formName,options){if(options===undefined){var options={linktype:"",linkvalue:"",tripcode:"",tripsequence:""}}
$.when(angularUtils.angularIsReady('trackFormShow')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'FormShow',formName:formName,options:options});}},function(error){throw new Error(error);},function(message){});}
_this.publishTravelPlannerAction=function(action,rank){$.when(angularUtils.angularIsReady('publishTravelPlannerAction')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TravelPlannerAction',actionName:action,actionValue:rank});}},function(error){throw new Error(error);},function(message){});}
_this.TrackBrochureUrlResult=function(brochureCategory,brochureType){$.when(angularUtils.angularIsReady('TrackBrochureUrlResult')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'BrochureUrlResult',brochureCategory:brochureCategory,brochureType:brochureType});}},function(error){throw new Error(error);},function(message){});}
_this.TrackFreeCatalogRequest=function(custNum,tripList){$.when(angularUtils.angularIsReady('TrackFreeCatalogRequest')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'FreeCatalogRequest',customerNumber:custNum,tripList:tripList});}},function(error){throw new Error(error);},function(message){});}
_this.publishRegistrationStart=function(formName){$.when(angularUtils.angularIsReady('publishRegistrationStart')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'RegistrationStart',formName:formName});}},function(error){throw new Error(error);},function(message){});}
_this.TrackInboxMessageOpen=function(params){$.when(angularUtils.angularIsReady('TrackInboxMessageOpen')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'OpenInboxMessage',messageDetails:(params&&params.messageDetails)?params.messageDetails:''});}},function(error){throw new Error(error);},function(message){});}
_this.TrackSweepstakesRegisterConfirmation=function trackSweepstakesRegisterConfirmation(){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SweepstakesRegisterConfirmation'});}}
_this.TrackRegistrationSuccess=function trackRegistrationSuccess(formName){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'RegistrationSuccess',formName:formName});}};_this.TrackVideoRating=function trackVideoRating(video){$.when(angularUtils.angularIsReady('TrackVideoRating')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'VideoRating',video:video||{}});}},function(error){throw new Error(error);},function(message){});}
_this.TrackRecognitionSignInRegistrationSuccess=function(options){$.when(angularUtils.angularIsReady('TrackRecognitionSignInRegistrationSuccess')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SigninRegisterSuccess',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackDnPSummaryConfirmationModel=function(options){$.when(angularUtils.angularIsReady('TrackDnPSummaryConfirmationModel')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'DnPSummaryConfirmationModel',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackReelEarthTpc=function(options){$.when(angularUtils.angularIsReady('TrackReelEarthTpc')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'ReelEarthTpc',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackTPGFormModel=function(options){$.when(angularUtils.angularIsReady('TrackTPGFormModel')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TPGFormModel',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackTPGViewOnline=function(options){$.when(angularUtils.angularIsReady('TrackTPGViewOnline')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TPGViewOnline',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackTPGFacets=function(options){$.when(angularUtils.angularIsReady('TrackTPGFacets')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TPGFacetsRequest',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackSoloTips=function(options){$.when(angularUtils.angularIsReady('TrackSoloTips')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SoloTipsRequest',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackGlobalTPGFormModel=function(options){$.when(angularUtils.angularIsReady('TrackGlobalTPGFormModel')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'GlobalTPGFormModel',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackGlobalTPGViewOnline=function(options){$.when(angularUtils.angularIsReady('TrackGlobalTPGViewOnline')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'GlobalTPGViewOnline',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackSoloTipsViewOnline=function(options){$.when(angularUtils.angularIsReady('TrackSoloTipsViewOnline')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SoloTipsViewOnline',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackRequestCallbackModal=function(options){$.when(angularUtils.angularIsReady('TrackRequestCallbackModal')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'RequestCallbackModal',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.trackShareVideoFormShow=function(formName,options){if(options===undefined){options={videoGuid:"",tripkey:"",videoName:"",videoType:"",componentName:"",linkValue:"",formName:'Content: Share Video With Friends',modelAction:'start'}}
$.when(angularUtils.angularIsReady('trackShareVideoFormShow')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'ShareVideoFormShow',formName:formName,options:options});}},function(error){throw new Error(error);},function(message){});}
_this.init();};return analyticsBridge;});require(['Analytics/components/AnalyticsBridge'],function(analyticsBridge){gcc=gcc||{};var _analyticsBridge=new analyticsBridge();const shareModalBody=document.querySelector('.js-share-modal-body');const shareOptionsModalBody=document.querySelector('.js-share-options-modal-body');const shareVideoWithFriendsContent='Content: Share Video With Friends';function updateHiddenFormValues(video){let hiddenBrandValue=document.querySelector(".js-share-video-wrapper #Brand");let hiddenVguidValue=document.querySelector(".js-share-video-wrapper #VGuid");let hiddenTripCodeValue=document.querySelector(".js-share-video-wrapper #TripCode");const hiddenVideoName=document.querySelector(".js-share-video-wrapper #VideoName");const hiddenVideoGuid=document.querySelector(".js-share-video-wrapper #VideoGuid");const hiddenVideoType=document.querySelector(".js-share-video-wrapper #VideoType");hiddenVideoGuid.value=video.videoGuid==""?video.guid:video.videoGuid;hiddenVideoType.value=video.videoType;const hiddenVideoNameValue=video.videoName;hiddenVideoName.value=hiddenVideoNameValue.replace(/(<([^>]+)>)/ig,'');function reformatVguid(vguid){return vguid.replace('&quot;','').replace('"','').replace('&quot;','').replace('"','').replace('-','');}
if(gcc.trip!==null){hiddenBrandValue.value=gcc.trip.brand;hiddenTripCodeValue.value=gcc.trip.code+gcc.trip.year;}}
function bindSendToMeClick(){const SendToMeControl=document.querySelector(".js-sendtome-control");const showYourEmail=function(){const YourEmail=document.querySelector(".js-your-email");const EmailFrom=$('#EmailFrom');if(SendToMeControl.checked){EmailFrom.show();EmailFrom.next().show();YourEmail.classList.remove("visibility-hidden");document.querySelector('#EmailFrom').setAttribute("required","required");EmailFrom.next().addClass("required");$('.js-your-email').find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error");EmailFrom.addClass("valid").removeClass("input-validation-error");}else{YourEmail.classList.add("visibility-hidden");document.querySelector('#EmailFrom').removeAttribute("required");EmailFrom.next().removeClass("required");$('.js-your-email').find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error");EmailFrom.addClass("valid").removeClass("input-validation-error");EmailFrom.hide();EmailFrom.next().hide();}}
SendToMeControl.addEventListener("change",showYourEmail);$('#EmailFrom').hide();}
function bindShowAddtionalEmailInputs(){let showNextHiddenEmailInput=function(){let hiddenEmailFriendInputs=document.querySelectorAll(".gcc-modal.active .js-friend-email[hidden]");hiddenEmailFriendInputs[0].removeAttribute("hidden");if(hiddenEmailFriendInputs.length===1){document.querySelector('.gcc-modal.active .js-video-share-add-email').remove();}}
let addAddtionalFriendsEmailLink=document.querySelector(".js-video-share-add-email");addAddtionalFriendsEmailLink.addEventListener("click",showNextHiddenEmailInput);}
function initFormValidation(){if($.validator&&$.validator.unobtrusive){$.validator.unobtrusive.parse("#shareVideoEmailModelForm");}}
function trackFormShowAnalytics(video,tripcontext){let options={};options.videoGuid=video.guid;options.tripkey=tripcontext;options.videoName=video.videoName;options.videoType=video.videoType;options.componentName=video.componentName;options.linkValue=video.linkValue;options.formName=shareVideoWithFriendsContent;options.modelAction='start';_analyticsBridge.trackShareVideoFormShow(shareVideoWithFriendsContent,options);}
gcc.shareVideoModalSuccess=function(result,data){if(result!==""&&result!=null){const elementId='#shareVideoEmailModelForm';var tripcontext=$(elementId+" #Tripkey").val();var videoId=$(elementId+" #VideoGuid").val();var videoName=$(elementId+" #VideoName").val();var videoType=$(elementId+" #VideoType").val();const trackingOptions={videoGuid:videoId||'',tripkey:tripcontext||'',videoName:videoName||'',videoType:videoType||'',formName:shareVideoWithFriendsContent,modelAction:'confirmation'};$(elementId).empty().html(result);_analyticsBridge.trackShareVideoFormShow(shareVideoWithFriendsContent,trackingOptions);}}
function openVideoShareModal(video){shareModalBody.innerHTML='';var delayForModalOpen=setTimeout(function(){if(document.querySelector('.gcc-modal.active > div')&&document.querySelector('.js-share-modal-body').innerText===""){gcc.showLoader(".gcc-modal.active > div");}},250);var shareType="gvl";const query=video.queryParams!==""?"&"+video.queryParams:""
var finalTripUrl=`${video.tripurl}?vguid=${video.guid}${query}&ref=${video.guid}&v=2&omtr_camp=sh:share-video:em`;if(video.tripurl===""){const videoPage=gcc.getRedirectURL(video);finalTripUrl=videoPage+"&omtr_camp=sh:share-video:em";shareType="";}
$.ajax({async:true,cache:false,url:"/Forms/Share/ShareVideoFormEmail",data:{vguid:video.guid,tripkey:video.tripcontext,geminiPlayerid:video.geminiPlayerid,videoPage:finalTripUrl,shareType:shareType},type:"POST",success:function(response){if(response!=""){console.log(video);clearTimeout(delayForModalOpen);gcc.hideLoader();shareModalBody.innerHTML=response;bindShowAddtionalEmailInputs();updateHiddenFormValues(video);trackFormShowAnalytics(video,video.tripcontext);initFormValidation();bindSendToMeClick();}
else{clearTimeout(delayForModalOpen);gcc.hideLoader();shareModalBody.innerHTML="<p class=\"error\">Form Load failed</p>";}}});}
gcc.getRedirectURL=function(video){const url=location.href.split('?')[0];const query=video.queryParams!==""?"&"+video.queryParams:""
if(video.tripcontext){return `${url}/travel-videos?vguid=${video.guid}${query}&ref=${video.guid}&v=2`;}
return `${url}?gccvid=${video.geminiPlayerid}${query}&ref=${video.guid}&v=2`}
function updateShareVideoOptionsModal(video){shareOptionsModalBody.innerHTML=`
                <!--Email share button-->
                <a class="share-modal__link" href="javascript:void(0)" 
                    onclick="gcc.updateShareVideoModal(event)" 
                    gcc-analytics-rule="ComponentClick"
                    data-component-name="${video.componentName}"
                    data-link-value="share video:icon:email"
                    data-video-guid="${video.videoGuid.toUpperCase()}" 
                    data-video="${video.guid}" 
                    data-tripcontext="${video.tripcontext}" 
                    data-video-name="${video.videoName}" 
                    data-video-type="${video.videoType}"
                    data-query-params="${video.queryParams}"
                    data-trip-url="${video.tripurl}"
                    data-gemini-playerid="${video.geminiPlayerid}">
                    <span class="icon-envelop1 link-color" aria-hidden="true"></span>
                    Email
                </a>

                <!--facebook share button-->
                <a  class="share-modal__link" href="javascript:void(0)" 
                    onclick="gcc.fbModal(event)"
                    gcc-analytics-rule="ComponentClick"
                    data-component-name="${video.componentName}"
                    data-link-value="share video:icon:fbapp"
                    data-video-guid="${video.videoGuid.toUpperCase()}" 
                    data-video="${video.guid}" 
                    data-tripcontext="${video.tripcontext}" 
                    data-video-name="${video.videoName}" 
                    data-video-type="${video.videoType}"
                    data-query-params="${video.queryParams}"
                    data-trip-url="${video.tripurl}"
                    data-gemini-playerid="${video.geminiPlayerid}">
                        <span class="icon-facebook" aria-hidden="true"></span>
                        Facebook
                 </a>`;}
gcc.fbModal=function(event){const fbLink=event.target;const video=getVideoModalObject(fbLink);const query=video.queryParams!==""?"&"+video.queryParams:""
var finalShareUrl=`${video.tripurl}?vguid=${video.guid}${query}&ref=${video.guid}&v=2`;if(video.tripurl===""){const encodedURL=gcc.getRedirectURL(video);finalShareUrl=encodedURL;}
finalShareUrl=encodeURIComponent(finalShareUrl+'&omtr_camp=sh:share-video:fb');if(window.analyticsBridge){window.analyticsBridge.TrackComponentClick({componentName:video.componentName,linkValue:video.linkValue,videoGuid:video.videoGuid,videoName:video.videoName,videoType:video.videoType});}
window.open(`https://www.facebook.com/sharer/sharer.php?u=${finalShareUrl}`,'facebook-share-dialog','width=626,height=436');}
gcc.updateShareVideoModal=function(event){const shareLink=event.target;const video=getVideoModalObject(shareLink);if(window.analyticsBridge){window.analyticsBridge.TrackComponentClick({componentName:video.componentName,linkValue:video.linkValue,videoGuid:video.videoGuid,videoName:video.videoName,videoType:video.videoType});}
gcc.closeNonHashModals();$("#shareVideoWithFriendModal").addClass("active");openVideoShareModal(video);}
function getVideoModalObject(link){return{videoGuid:link.dataset.videoGuid||'',guid:link.dataset.video||'',videoName:link.dataset.videoName||"",videoHeading:link.dataset.videoHeading||link.dataset.videoName||"",videoType:link.dataset.videoType,tripcontext:link.dataset.tripcontext||"",geminiPlayerid:link.dataset.geminiPlayerid||"",queryParams:link.dataset.queryParams||"",componentName:link.dataset.componentName||"",linkValue:link.dataset.linkValue||"",tripurl:link.dataset.tripUrl||"",}}
gcc.shareVideoOnMobile=function(){const video=getVideoModalObject(this);const videoURL=gcc.getRedirectURL(video);let title="";let text="";var shareType="gvl";const query=video.queryParams!==""?"&"+video.queryParams:""
var finalTripUrl=`${video.tripurl}?vguid=${video.guid}${query}&ref=${video.guid}&v=2`;if(video.tripurl===""){finalTripUrl=videoURL;shareType="";}
const url=finalTripUrl+"&omtr_camp=sh:share-video:other";if(window.analyticsBridge){window.analyticsBridge.TrackComponentClick({componentName:video.componentName,linkValue:"share video:btn",videoGuid:video.videoGuid,videoName:video.videoName,videoType:video.videoType});}
$.ajax({type:"POST",url:"/api/sitecore/ProductShare/ShareVideoFormIOS",async:false,data:{vguid:video.guid,shareType:shareType},success:function(videoDetails){const videoTitle=videoDetails.VideoTitle;title=videoTitle.replace(/(<([^>]+)>)/ig,'');let videoText=videoDetails.VideoText;videoText=videoText.replace(/(<([^>]+)>)/ig,'');text=videoText+"\n\n";}});try{navigator.share({title:title,text:text,url:url});}catch(error){console.log('Error sharing: '+error);}}
gcc.bindOpenShareModalLinks=function(){let nonInitalizedShareVideoLinks=document.querySelectorAll('.js-share-video:not(.share-video-initalized)');var iOsForIphone=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Macintosh/i.test(navigator.userAgent);nonInitalizedShareVideoLinks.forEach(function(shareLink){if(navigator.share&&iOsForIphone){shareLink.setAttribute("href","javascript:void(0);");}else{shareLink.classList.add("share-video-initalized");}});if(!navigator.share||!iOsForIphone){$('.js-share-video').on("click",function(){const video=getVideoModalObject($(this)[0]);updateShareVideoOptionsModal(video);});}else{$('.js-share-video').on("click",gcc.shareVideoOnMobile);}}
gcc.bindOpenShareModalLinks();});define("ShareVideoModal/main",function(){});$("#trip-keyword-hero").attr('value','');;define('HomeDestinationCarousel/components/configSlider',[],function(){var initSlider=function(){var _this=this;_this.destinations=function(){var regionNavAnalytics=function(regionOnAnalytics,countriesCount){var activeCountriesCount=$('.slick-active[data-region="'+regionOnAnalytics+'"]').length;var params={};params.componentName='hpdstcrl:regname:'+regionOnAnalytics.replace(/[:,]/g,"");params.componentAction=activeCountriesCount+' of '+countriesCount;params.componentAction=params.componentAction.replace(/[:,]/g,"");TrackComponentClick(params);};var activateRegionCarousel=function(regionIndex){$('.js-slick-homepage-country, .js-regionlink').removeClass('is-active');$('[data-carousel-index="'+regionIndex+'"]').addClass('is-active');$('.js-regionlink[data-nav-index="'+regionIndex+'"]').addClass('is-active');};$('.js-slick-homepage-country').each(function(){$(this).slick({infinite:false,slidesToShow:1,mobileFirst:true,responsive:[{breakpoint:1200,settings:{slidesToShow:5,slidesToScroll:5,dots:true}},{breakpoint:1023,settings:{slidesToShow:4,slidesToScroll:4,dots:true}},{breakpoint:767,settings:{slidesToShow:3,slidesToScroll:3,dots:true}},{breakpoint:660,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:100,settings:{slidesToShow:1,slidesToScroll:1}}]});});function disabledCarouselRotation(slider){$(slider).removeClass('js-rotate');}
var isRotationEnabled=function(){return $('.js-slick-region-nav').hasClass('js-rotate');};var rotateSlickSlider=function(slider,index,speed){var numberOfRegions=$('.js-nav-rotate').length-1;if(!isRotationEnabled()){return;}else{activateRegionCarousel(index);}
index++;if(numberOfRegions>=index){setTimeout(function(){rotateSlickSlider(slider,index,parseFloat($('.js-rotate').data('speed')));},speed);}else if(numberOfRegions<index){index=0;setTimeout(function(){rotateSlickSlider(slider,index,parseFloat($('.js-rotate').data('speed')));},speed);}};function initCarouselRotation(){var regionCarouselIsVisable=$(".js-slick-homepage-country").is(":in-viewport");if(!regionCarouselIsVisable){setTimeout(initCarouselRotation,1000);return;}
var slider=$('.js-slick-region-nav');var numberOfRegions=$('.js-nav-rotate').length-1;var moreThanOneRegion=numberOfRegions>0;var isMobileNav=$('.js-selection-nav').css('display')==="inline-block";var okToRotateRegions=moreThanOneRegion&&!isMobileNav;if(!okToRotateRegions){return;}
rotateSlickSlider(slider,0,parseFloat($('.js-rotate').data('speed')));}
function initDestinationCarousel(){activateRegionCarousel(0);initCarouselRotation();}
initDestinationCarousel();$(document).on('click','.slick-arrow, .slick-dots, .js-nav-rotate',function(){disabledCarouselRotation('.js-slick-region-nav');});$('.js-regionlink').click(function(){var regionIndex=$(this).data('nav-index');var regionOnAnalytics=$(this).data('region');var countriesCount=$(this).data('countries-count');activateRegionCarousel(regionIndex);regionNavAnalytics(regionOnAnalytics,countriesCount);});$('.js-selection-nav').change(function(){var selectedOption=$('.js-selection-nav option:selected');var regionOnAnalytics=$(selectedOption).data('region');var countriesCount=$(selectedOption).data('countries-count');var selectionIndex=$(selectedOption).data('nav-index');activateRegionCarousel(selectionIndex);disabledCarouselRotation('.js-slick-region-nav');regionNavAnalytics(regionOnAnalytics,countriesCount);});$('.js-regionlink').click(function(){var regionIndex=$(this).data('nav-index');var regionOnAnalytics=$(this).data('region');var countriesCount=$(this).data('countries-count');activateRegionCarousel(regionIndex);regionNavAnalytics(regionOnAnalytics,countriesCount);});};};return initSlider;});require(['HomeDestinationCarousel/components/configSlider'],function(initSlider){var _initSlider=new initSlider();_initSlider.destinations();});define("HomeDestinationCarousel/main",function(){});if($("div.video-js.home-page-video").length){$("div.video-js.home-page-video").each(function(index){var video=$('#'+$(this).attr("id")+'_html5_api')||{};video.removeAttr('autoplay');});}
$(document).ready(function(){gcc=gcc||{};gcc.homePageSectionsList="";var hpSections=[];var recentlyViewedVideoTypes="";var recentlyViewedVideoIndex=-1;$("[data-analytics-section]").each(function(index,element){var value=$(element).data().analyticsSection;var additionalValue=$(element).data().analyticsSectionAdditionalData;var videoTypeValue=$(element).data().analyticsVideoType;if(value){if(additionalValue){var existingIndex=hpSections.findIndex(function(e){return e.indexOf(value)===0;});if(existingIndex>=0){hpSections[existingIndex]+="_"+additionalValue;}else{hpSections.push(value+"_"+additionalValue);}}else{hpSections.push(value);}
if(value=='rvp'){recentlyViewedVideoIndex=hpSections.findIndex(function(e){return e.indexOf(value)===0;});}}
if(videoTypeValue){recentlyViewedVideoTypes+="_"+videoTypeValue;}});if(recentlyViewedVideoTypes!=""&&recentlyViewedVideoIndex>=0){hpSections[recentlyViewedVideoIndex]+=recentlyViewedVideoTypes;}
hpSections.forEach(function(element,index){gcc.homePageSectionsList+=(index+1)+"_"+element+":";});gcc.homePageSectionsList=gcc.homePageSectionsList.substr(0,gcc.homePageSectionsList.length-1);if(gcc.profile&&gcc.profile.TopTpc&&gcc.profile.TopTpc!=''){gcc.hpCustomerTpc=gcc.profile.TopTpc.replace(/,/g,':');}else{if(gcc.profile&&gcc.profile.anonymous&&gcc.profile.anonymous===true){gcc.hpCustomerTpc='';}
else{gcc.hpCustomerTpc='no TPCs';}}
var initializeVideos=function(){$("div.video-js.home-page-video").each(function(index){var attrId=$(this).attr("id");if(attrId){var player=videojs(attrId);player.on('loadedmetadata',function(){checkVideoPlay('wait-for-player',attrId);checkVideoPlay('hero-video-player',attrId);});if($('#'+attrId).parent().hasClass('hero-video-player')){player.play();}
player.on('ended',function(){player.play();});}});function checkVideoPlay(classname,attrId){if($('#'+attrId).parent().hasClass(classname)){$('#'+attrId).parent().removeClass(classname);controlVideoOnInViewPort();}}
var controlVideoOnInViewPort=function(event){$("div.video-js.home-page-video").each(function(index){var attrId=$(this).attr("id");if(attrId){var player=videojs(attrId);let playPromise;if($(this).is(":in-viewport")||$(this).parent().is(":in-viewport")){playPromise=player.play();}
else if(playPromise!==undefined){playPromise.then(_=>{player.pause();});}}});};window.addEventListener('focus',controlVideoOnInViewPort);window.addEventListener('blur',function(){$("div.video-js.home-page-video").each(function(index){var attrId=$(this).attr("id");if(attrId){var player=videojs(attrId);player.pause();}});});window.addEventListener('visibilitychange',controlVideoOnInViewPort);window.addEventListener('scroll',controlVideoOnInViewPort);controlVideoOnInViewPort();};$(window).load(function(){initializeVideos();});$('.slider-placeholder:empty').remove();ValidateSliders();window.equalizeHeight('attr','[data-matchheight="LastViewedProduct"]');window.equalizeHeight('attr','[data-matchheight="trendingPrice"]');window.equalizeHeight('attr','[data-matchheight="trendingTripTitle"]');window.equalizeHeight('attr','[data-matchheight="trendingExtensions"]');});function ValidateSliders(){$('.js-slick-homepage-carrousel').each(function(){$(this).slick({dots:true,arrows:false,infinite:false,speed:300,slidesToShow:1,mobileFirst:true,responsive:[{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:1,infinite:true,dots:true}},{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:300,settings:{slidesToShow:1,slidesToScroll:1}}]});});};define('Angular/components/utils',[],function(){function isAngularLoaded(){if(angular&&angular.element($(document.body))&&angular.element($(document.body)).injector()){return true;}else{return false;}}
function angularIsReady(debugSource){var d=new $.Deferred();if(isAngularLoaded()){d.resolve();}else{var timeout=10000;var interval=setInterval(function(){if(isAngularLoaded()){d.resolve("Angular code is loaded");clearInterval(interval);}else if(timeout<0){d.reject("Error: Angular code failed to load. Debug Source="+debugSource);clearInterval(interval);}else{timeout=timeout-100;d.notify("Warn: Angular code is not loaded yet. Retrying...timeout="+timeout+" - Debug Source:"+debugSource);}},100);}
return d.promise();}
var refreshAngularClass='angularRefreshAfterAjax';function wrapInAngularRefresh(htmlData){var wrapper=$('<div class="'+refreshAngularClass+'">');wrapper.html(htmlData);return wrapper;}
function refreshAngular(selector,refreshAngularCustomClass){$.when(angularIsReady('refreshAngular')).then(function(message){selector=(selector?selector+" ":"")+"."+refreshAngularClass;if(refreshAngularCustomClass)selector=refreshAngularCustomClass;$(selector).each(function(){var content=$(this);angular.element($(document.body)).injector().invoke(['$compile',function($compile){var scope=angular.element(content).scope();$compile(content)(scope);}]);});},function(error){throw new Error(error);},function(message){});}
return{isAngularLoaded:isAngularLoaded,angularIsReady:angularIsReady,refreshAngular:refreshAngular,wrapInAngularRefresh:wrapInAngularRefresh}});define('SitecoreExtensions/components/ajaxLoader',['Angular/components/utils'],function(angularUtils){var ajaxLoaderModule=function(){var _this=this;_this.loadPartial=function(partial,container,callback)
{if(container==".js-trip-ajax-main"||container=="#TripBuilderContainer"){_this.ajaxLoaderShow(container);$.get(partial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(container,newData,callback);});break;default:_this.loadHtml(container,data,callback);if($("#hidShowFeatured").val()=="true"){$(".slat-sub-section .trip-link").first().click();}
break;}}).fail(function(){_this.ajaxLoaderHide();});}else{var parentPartialSplitted=(window.location.pathname+window.location.search).split('/');var parentPartial=parentPartialSplitted.slice(0,6).join('/')+"/web content/"+parentPartialSplitted.slice(6,8).join('/');var parentContainer='js-trip-ajax-main';_this.ajaxLoaderShow(parentContainer);$.get(parentPartial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(parentContainer,newData,callback);});break;default:_this.loadHtml(parentContainer,data,function(){});_this.ajaxLoaderShow(container);var partialSplitted=partial.split('/');if(partialSplitted.length>=10){partial=partialSplitted.slice(0,5).join('/');switch(partialSplitted[8]){case "featured articles":partial+="/FeaturedArticles/";break;case "historycultureandmore":partial+="/History-Culture-and-More/";break;}
partial+=partialSplitted[9];}
$.get(partial,function(data){var title=$(data).filter('title').text();switch(title){case "404":$.get("/Errors/404s",function(newData){_this.loadHtml(container,newData,callback);});break;default:_this.loadHtml(container,data,callback);break;}});break;}});}}
_this.loadHtml=function(container,data,callback){_this.ajaxLoaderHide();$(container).html(angularUtils.wrapInAngularRefresh(data));angularUtils.refreshAngular(container);callback();}
_this.ajaxLoaderShow=function(container){var ajaxContainer=container?container:'body';$('<div class="ajax-loader-wrap" id="ajaxLoader" style="top:'+$(ajaxContainer).position().top+'px; z-index:9999; min-height:100px; height:'+$(ajaxContainer).outerHeight()+'px; position:absolute;"><img id="loadingImg" src="/Content/images/global/ajax-loader.gif" style="top:35%" /></div>').appendTo($(ajaxContainer));}
_this.ajaxLoaderHide=function(){$('#ajaxLoader').hide().remove();}};return ajaxLoaderModule;});require(['SitecoreExtensions/components/ajaxLoader'],function(ajaxLoader){var _ajaxLoader=new ajaxLoader();var hasGdrbCookie=function(){if(typeof $.cookie('gccCookieConsent')==="string"){return true;}
else{var gdprdata={customerID:gcc.profile&&gcc.profile.cn?gcc.profile.cn:""}
if(gdprdata.customerID==""){return false;}
else{$.ajax({type:"POST",data:gdprdata,url:"/api/sitecore/MarketingPages/DidCustomerGDPRAccpetedConsent",success:function(rData){if(rData=='True'){createCookie(false);return true;}},error:function(rData){}});}}}
var createCookie=function(logInDatabase=true){$.cookie('gccCookieConsent',true,{expires:365,path:'/'});gdrpAlert.classList.remove('active');footer.setAttribute('style',null);_ajaxLoader.ajaxLoaderHide("body");if(logInDatabase){var gdprdata={consentGivenGDPR:"true",customerID:gcc.profile&&gcc.profile.cn?gcc.profile.cn:"",}
$.ajax({type:"POST",data:gdprdata,url:"/api/sitecore/MarketingPages/AddGDPRConsent",success:function(data){},error:function(error){}});}}
if(hasGdrbCookie()){return;}else{var gdrpAlert=document.querySelector('.js-gdpr');var btnAccept=document.querySelector('.accept-gdpr');var footer=document.querySelector('.js-footer');gdrpAlert.classList.add('active');var countryName;$.ajax({type:"GET",url:"/api/sitecore/MarketingPages/GetUserCountryName",success:function(data){countryName=data;if(gcc.isNavigationEnabled.toLocaleLowerCase()=='false'){_ajaxLoader.ajaxLoaderShow("body");$("#loadingImg").hide();if(gcc.navigationEnabledCountry&&countryName&&gcc.navigationEnabledCountry.toLowerCase().indexOf(countryName.toLowerCase())!=-1){_ajaxLoader.ajaxLoaderHide("body");}}},error:function(error){}});var extraPadding=gdrpAlert.getBoundingClientRect().height+50;footer.setAttribute('style','padding-bottom:'+extraPadding+'px;')
btnAccept.addEventListener('click',createCookie);}});define("CookieConsent/main",function(){});function ajaxTypeahead(url,selector){$.get(url,function(data){$(selector).autocomplete({source:function(req,responseFn){var re=$.ui.autocomplete.escapeRegex(req.term);var matcher=new RegExp('^'+re,'i');var matches=$.grep(data,function(item,index){return matcher.test(item);});if(!matches.length){responseFn({label:'No Suggestions'});}else{responseFn(matches);}},select:function(event,ui){if(ui.item.value==='No Suggestions'){event.preventDefault();return false;}},minLength:3});});}
function ajaxTypeaheadDestinations(url,selectorArray,positionAlignmentArray,isAnalyticsEnabled){var labels={};labels.country=$("#hidSearchLabelCountries").val();labels.region=$("#hidSearchLabelRegions").val();labels.adventures=$("#hidSearchLabelAdventures").val();labels.allCountries=$("#hidSearchLabelAllCountries").val();labels.allAdventures=$("#hidSearchLabelAllAdventures").val();labels.countryAdventures=$("#hidSearchLabelCountryAdventures").val();labels.regionAdventures=$("#hidSearchLabelRegionAdventures").val();$.get(url,function(data){$.each(selectorArray,function(item,selector){var searchTerm='';$(selector).autocomplete({position:{my:positionAlignmentArray[item]+" top",at:positionAlignmentArray[item]+" bottom"},minLength:3,source:function(req,responseFn){searchTerm=req.term.toLowerCase();var re=$.ui.autocomplete.escapeRegex(req.term.toLowerCase());var matcher=new RegExp(re,'i');var matches=$.grep(data,function(item,index){if(item.value){return matcher.test(item.value);}
return false;});if(!matches.length){responseFn({label:'No Suggestions'});}else{responseFn(matches);}},focus:function(event,ui){if(ui.item){$(selector).val(ui.item);return false;}else{event.preventDefault();return false;}},select:function(event,ui){if(!event.originalEvent.key){gcc.isMenuClicked=true;}
if(ui.item){if(selector=='#trip-keyword-global'){searchFromGlobalSearch(event,true);}else{searchFromCarousel(event,true);}
return false;}else{event.preventDefault();return false;}}}).autocomplete("instance")._renderMenu=function(ul,items){var isTypeAheadCarousel=selector.toString()==="#trip-keyword-hero";var typeaheadMenuClass="typeahead--"+selector.toString().slice(1);var categoryCssClass=isTypeAheadCarousel?"typeahead__category typeahead__category--large-box":"typeahead__category";var optionCssClass=isTypeAheadCarousel?"typeahead__option typeahead__option--large-box":"typeahead__option";var analyticsKey=(selector=="#trip-keyword-hero"?'hpsbx':'glbsbx');$.ajax({type:"POST",url:"/destinationsearch/trips/"+searchTerm,async:false,success:function(response){items=items.concat(response);}});ul.addClass(typeaheadMenuClass);var noSuggLinkKey=analyticsKey+':nosugclk::user-entered:'+searchTerm.replace(/:/g,'-').replace(/&amp;/g,'-AND-').substring(0,75);if((items.length==1)&&items[0].value=="No Suggestions"){ul.append("<li class='ui-autocomplete-category typeahead__category typeahead__category--large-box'>"+
"<a href='/tripsavailable?q="+searchTerm+"' gcc-analytics-rule='Link' data-link-value='"+noSuggLinkKey+"'> No Suggestions </a>"+
"</li>");var noSuggestionKey=analyticsKey+':nosug:'+searchTerm;if(isAnalyticsEnabled){analyticsBridge.TrackOpenModalEvent({modalReqType:noSuggestionKey});}}else{var region=items.filter(function(x){return x.type===labels.region;})[0];var destination='';var country='';var suggestionsKey=analyticsKey+':sug:'+searchTerm+':';var tripsUrl='/tripsavailable/';var suggestionLinkKey=analyticsKey+":sugclk:r_c_t:";if(region&&region.name){tripsUrl+="?r="+region.name;destination=region.name;suggestionsKey+='r1';var countries=items.filter(function(x){return x.type===labels.country;});for(var i=0;i<countries.length;i++){var index=items.indexOf(countries[i]);if(!(index<0)){items.splice(index,1);}}
if(region.regioncountries.length>0){suggestionsKey+="_c"+region.regioncountries.length;}}else{var countries=items.filter(function(x){return x.type===labels.country;});country=countries[0];if(country&&country.name){tripsUrl+="?c="+country.name;destination=country.name;}
if(countries.length>0){suggestionsKey+="c"+countries.length;}}
var regionCountriesLabel=labels.allCountries;regionCountriesLabel=regionCountriesLabel.replace("[REGION]",destination);var adventuresLabel=region&&region.name?labels.regionAdventures:country&&country.name?labels.countryAdventures:labels.allAdventures;adventuresLabel=adventuresLabel.replace("[COUNTRY]",destination).replace("[REGION]",destination);var currentCategory="";$.each(items,function(index,item){if(item){if(item.value!=='No Suggestions'){if(item.type!=currentCategory){ul.append("<li class='"+categoryCssClass+"' data-ui-autocomplete-item=''>"+item.type+"</li>");currentCategory=item.type;}
ul.append("<li class='ui-autocomplete-category "+optionCssClass+"' data-ui-autocomplete-item='"+item.name+"'><a href="+item.url+"?ds=true"+" class='data-menu-item' gcc-analytics-rule='Link' data-link-value='"+(suggestionLinkKey+(item.type==labels.region?'r':item.type==labels.country?'c':'t')+":"+item.name.replace(/:/g,'-').replace(/&amp;/g,'-AND-').substring(0,75))+"'>"+item.name+"</a></li>");if(item.regioncountries){for(i=0;i<item.regioncountries.length;i++){if(item.regioncountries[i].name){if(i==0){ul.append("<li class='"+categoryCssClass+"' data-ui-autocomplete-item=''>"+labels.country+"</li>");ul.append("<li class='ui-autocomplete-category "+optionCssClass+"' data-ui-autocomplete-item='"+item.regioncountries[i].name+"'><a href='"+item.regioncountries[i].url+"?ds=true"+"' gcc-analytics-rule='Link' data-link-value='"+(suggestionLinkKey+"c:"+item.regioncountries[i].name.replace(/:/g,'-').replace(/&amp;/g,'-AND-').substring(0,75))+"'>"+item.regioncountries[i].name+"</a>"+"</li>");}else{ul.append("<li class='ui-autocomplete-category "+optionCssClass+"' data-ui-autocomplete-item='"+item.regioncountries[i].name+"'><a href='"+item.regioncountries[i].url+"?ds=true"+"' gcc-analytics-rule='Link' data-link-value='"+(suggestionLinkKey+"c:"+item.regioncountries[i].name.replace(/:/g,'-').replace(/&amp;/g,'-AND-').substring(0,75))+"'>"+item.regioncountries[i].name+"</a></li>");}
if(i==item.regioncountries.length-1&&region&&region.name&&item.hasmorecountries){ul.append("<li class='ui-autocomplete-category "+optionCssClass+"' data-ui-autocomplete-item='"+regionCountriesLabel+"'><a href='"+region.url+"?ds=true"+"' gcc-analytics-rule='Link' data-link-value='"+(suggestionLinkKey+"c:"+regionCountriesLabel.replace(/:/g,'-').replace(/&amp;/g,'-AND-').substring(0,75))+"'>"+regionCountriesLabel+" </a></li>");suggestionsKey+='+';}}}}
if(item.type==labels.adventures&&index==items.length-1){ul.append("<li class='ui-autocomplete-category "+optionCssClass+"' data-ui-autocomplete-item='"+adventuresLabel+"'><a href='"+tripsUrl+"' gcc-analytics-rule='Link' data-link-value='"+(suggestionLinkKey+"t:"+adventuresLabel.replace(/:/g,'-').replace(/&amp;/g,'-AND-').substring(0,75))+"'>"+adventuresLabel+"</a>"+"</li>");}}}});ul.append("<li class='ui-autocomplete-category' hidden data-ui-autocomplete-item='"+searchTerm+"'><a href='/tripsavailable?q="+searchTerm+"' gcc-analytics-rule='Link' data-link-value='"+noSuggLinkKey+"'>"+searchTerm+"</a>"+"</li>");var trips=items.filter(function(x){return x.type===labels.adventures;});if(trips.length>0){if(region||country){suggestionsKey+='_';}
suggestionsKey+='t'+trips.length+'+';}
if(isAnalyticsEnabled){analyticsBridge.TrackOpenModalEvent({modalReqType:suggestionsKey});}}
angularUtils.refreshAngular(null,'#'+ul.attr('id'));}});});};define('common/utils/getUrlVars',[],function(){function getUrlVars(){var map={},pattern="[?&]+([^=&]+)=([^&#]*)",regex=new RegExp(pattern,"gi"),parts=window.location.href.replace(regex,function(m,key,value){map[key]=value;});return map;}
return getUrlVars;});define('RunOnEveryPage/components/autoPlayVideo',['common/utils/getUrlVars'],function(getUrlVars){function autoPlayVideo(playerName){if(!playerName)playerName=getPlayerName();if(playerName){if(!angular.element(document.getElementById(playerName)).scope().isInitialized||((typeof videojs)=="undefined")||gcc.engageFullscreenPlay==="undefined"){setTimeout(function(){autoPlayVideo(playerName);},250);return;}
gcc.engageFullscreenPlay(videojs.players[playerName]);}}
function getPlayerName(){let playerName;if(getUrlVars().gccvid!=null){const pn=getUrlVars().gccvid;const _player=$('div[gemini-player="'+pn+'"]');if(_player.length){playerName=pn;if(!!_player.parents(".gcc-modal-open").attr("id")){window.location.hash=_player.parents(".gcc-modal-open").attr("id");}
if(!!_player.parents(".large-info-window").length){$('input[data-videoplayer="'+playerName+'"]').prop('checked',true);}}}
return playerName;}
return autoPlayVideo;});define('Product/components/slickSliders',[],function(){var slickSliders=function(){var _this=this;if(isInExperienceEditor){_this.promoAreaSlider=function(){$('.js-slick-trip-promos').slick({infinite:false,slidesToShow:1,slidesToScroll:1,dots:true,appendDots:$('.js-dots-here'),prevArrow:$('.js-prev-here'),nextArrow:$('.js-next-here')});};}else{_this.promoAreaSlider=function(){$('.js-slick-trip-promos').slick({slidesToShow:1,slidesToScroll:1,dots:true,appendDots:$('.js-dots-here'),prevArrow:$('.js-prev-here'),nextArrow:$('.js-next-here')});};}
_this.accommodationCarouselSlider=function(){if($('.js-lodging-slider:not(.slick-initialized)').length===0){return;}
$('.js-lodging-slider:not(.slick-initialized)').each(function(){if(!$('.js-lodging-slider:not(.slick-initialized)').length){return;}
$(this).each(function(){$(this).slick({slidesToShow:1,slidesToScroll:1,mobileFirst:true,dots:true,adaptiveHeight:true,responsive:[{breakpoint:600,settings:{dots:false,arrows:true}},{breakpoint:1,settings:{arrows:false}}]});});});$('.js-tab-link, .js-non-hash-modal').click(function(){if($('.js-lodging-slider.slick-initialized').length>0){$('.js-lodging-slider.slick-initialized').slick('slickGoTo',0)
setTimeout(function(){$('.js-lodging-slider').slick('resize');},2000)}});}
_this.accommodationSlider=function(){if($('.js-slick-acccommodation').length===0){return;}
$('.js-slick-acccommodation').each(function(){if(!$('.js-slick-acccommodation').length){return;}
$(this).each(function(){$(this).slick({slidesToShow:1,slidesToScroll:1,mobileFirst:true});});});$('.js-tab-link, .js-non-hash-modal').click(function(){if($('.js-slick-acccommodation.slick-initialized').length>0){$('.js-slick-acccommodation.slick-initialized').slick('slickGoTo',0)}});}
_this.recommendedSlider=function(){$('.js-slick-recomended-videos').slick({infinite:false,slidesToShow:1,slidesToScroll:1,mobileFirst:true,accessibility:true,responsive:[{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:300,settings:{slidesToShow:1,slidesToScroll:1}}]});};};return slickSliders;});define('Angular/components/utils',[],function(){function isAngularLoaded(){if(angular&&angular.element($(document.body))&&angular.element($(document.body)).injector()){return true;}else{return false;}}
function angularIsReady(debugSource){var d=new $.Deferred();if(isAngularLoaded()){d.resolve();}else{var timeout=10000;var interval=setInterval(function(){if(isAngularLoaded()){d.resolve("Angular code is loaded");clearInterval(interval);}else if(timeout<0){d.reject("Error: Angular code failed to load. Debug Source="+debugSource);clearInterval(interval);}else{timeout=timeout-100;d.notify("Warn: Angular code is not loaded yet. Retrying...timeout="+timeout+" - Debug Source:"+debugSource);}},100);}
return d.promise();}
var refreshAngularClass='angularRefreshAfterAjax';function wrapInAngularRefresh(htmlData){var wrapper=$('<div class="'+refreshAngularClass+'">');wrapper.html(htmlData);return wrapper;}
function refreshAngular(selector,refreshAngularCustomClass){$.when(angularIsReady('refreshAngular')).then(function(message){selector=(selector?selector+" ":"")+"."+refreshAngularClass;if(refreshAngularCustomClass)selector=refreshAngularCustomClass;$(selector).each(function(){var content=$(this);angular.element($(document.body)).injector().invoke(['$compile',function($compile){var scope=angular.element(content).scope();$compile(content)(scope);}]);});},function(error){throw new Error(error);},function(message){});}
return{isAngularLoaded:isAngularLoaded,angularIsReady:angularIsReady,refreshAngular:refreshAngular,wrapInAngularRefresh:wrapInAngularRefresh}});define('Analytics/components/AnalyticsBridge',['Angular/components/utils'],function(angularUtils){var analyticsBridge=function(){var _this=this;var _analyticsService;function getAnalyticsService(){if(_analyticsService===undefined)
_analyticsService=angular.element($(document.body)).injector().get('GccAnalyticsService');}
_this.init=function(){window.analyticsBridge=_this;if(window.analyticsQueue){for(var i=0;i<window.analyticsQueue.length;i++){_this[window.analyticsQueue[i].functionName].apply(this,window.analyticsQueue[i].args);}
window.analyticsQueue=[];}};_this.trackPageView=function(params){$.when(angularUtils.angularIsReady('trackPageView')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'PageView',componentName:(params&&params.componentName)?params.componentName:'',componentAction:(params&&params.componentAction)?params.componentAction:'',tripCode:(params&&params.TripCode)?params.TripCode:'',tripYear:(params&&params.TripYear)?params.TripYear:'',searchInitiatedFrom:(params&&params.searchInitiatedFrom)?params.searchInitiatedFrom:'',searchInitiatedBy:(params&&params.searchInitiatedBy)?params.searchInitiatedBy:'',previousSearchParams:(params&&params.previousSearchParams)?params.previousSearchParams:''});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackComponentClick=function(params){if(gcc.featureFlags.event29==="True")return;$.when(angularUtils.angularIsReady('TrackComponentClick')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'ComponentClick',componentName:(params&&params.componentName)?params.componentName:'',componentAction:(params&&params.componentAction)?params.componentAction:'',tripCode:(params&&params.TripCode)?params.TripCode:'',tripYear:(params&&params.TripYear)?params.TripYear:'',tipGuid:(params&&params.tipGuid)?params.tipGuid:'',componentHasDesc:(params&&typeof(params.componentHasDesc)!=="undefined")?''+params.componentHasDesc:'',linkValue:(params&&params.linkValue)?params.linkValue:'',linkName:(params&&params.linkName)?params.linkName:'',currentVideo:(params&&params.currentVideo)?params.currentVideo:'',impressionDesc:(params&&params.impressionDesc)?params.impressionDesc:'',domElement:(params&&params.domElement)?params.domElement:'',currentRecommendedVideo:(params&&params.currentRecommendedVideo)?params.currentRecommendedVideo:'',selectedRecommendedVideo:(params&&params.selectedRecommendedVideo)?params.selectedRecommendedVideo:'',videoGuid:(params&&params.videoGuid)?params.videoGuid:''});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.publishAudit=function(auditName,auditValue,auditExtras){$.when(angularUtils.angularIsReady('publishAudit')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'Audit',auditName:auditName,auditValue:auditValue,tripCode:(auditExtras&&auditExtras.TripCode)?auditExtras.TripCode:'',tripYear:(auditExtras&&auditExtras.TripYear)?auditExtras.TripYear:'',customerNumber:(auditExtras&&auditExtras.CustomerNumber)?auditExtras.CustomerNumber:'',modalDesc:(auditExtras&&auditExtras.ModalDesc)?auditExtras.ModalDesc:'',isSimplifiedRegistration:auditExtras&&auditExtras.isSimplifiedRegistration,isTrackModalCombined:auditExtras&&auditExtras.isTrackModalCombined});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSignIn=function(options){$.when(angularUtils.angularIsReady('TrackSignIn')).then(function(message){getAnalyticsService();if(_analyticsService){if(options&&options.tpActionName){_analyticsService.trackRule({rule:'TravelPlannerAction',actionName:options.tpActionName,actionValue:options.tpActionValue});}
_analyticsService.trackRule({rule:'Signin',options:options});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSignInSuccess=function(options){$.when(angularUtils.angularIsReady('TrackSignInSuccess')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SigninSuccess',options:options});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSigninFailure=function(){$.when(angularUtils.angularIsReady('TrackSignInFailure')).then(function(message){var options={};options.description="mdl_signin";getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SigninFailure',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.addTertiary=function(id){if(id&&typeof gcc!="undefined"&&gcc.page&&gcc.page.pageName){var items=gcc.page.pageName.split(':').slice(0,6);items.push(id);gcc.page.pageName=items.join(':');}}
_this.trackEvent=function(eventName){$.when(angularUtils.angularIsReady('trackEvent')).then(function(message){getAnalyticsService();if(_analyticsService){var x={rule:eventName};_analyticsService.trackRule(x);}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.trackLinkEvent=function(params){if(gcc.featureFlags.event29==="True")return;$.when(angularUtils.angularIsReady('trackLinkEvent')).then(function(message){getAnalyticsService();var x={rule:'Link',action:'execute',icid:params.icid};_analyticsService.trackRule(x);},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackOpenModalEvent=function(params){$.when(angularUtils.angularIsReady('TrackOpenModalEvent')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'OpenModal',modalReqType:(params&&params.modalReqType)?params.modalReqType:'',tripCode:(params&&params.tripCode)?params.tripCode:'',tripYear:(params&&params.tripYear)?params.tripYear:'',resId:(params&&params.resId)?params.resId:'',tripBrand:(params&&params.tripBrand)?params.tripBrand:'',isAirItinerary:(params&&params.isAirItinerary)?params.isAirItinerary:'',isImpressionEvent:(params&&params.isImpressionEvent)?params.isImpressionEvent:false,dayPersName:(params&&params.dayPersName)?params.dayPersName:''});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TrackSimplifiedRegistrationStart=function(options){options=options||{};options.description="mdl_mac_smplreg";$.when(angularUtils.angularIsReady('TrackSimplifiedRegistrationStart')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SimplifiedRegistrationStart',options:options});}},function(error){fail
throw new Error(error);},function(message){notify});}
_this.TpcInterestBrowsingEvent=function tpcInterestBrowsingEvent(eventName,customerNumber,tripCode,tripYear,tripBrand,country){$.when(angularUtils.angularIsReady('TpcInterestBrowsingEvent')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'InterestBrowse',formName:eventName,customerNumber:customerNumber,country:country,tripCode:tripCode,tripBrand:tripBrand,tripYear:tripYear});}},function(error){throw new Error(error);},function(message){});}
_this.publishTpcBrowsingEvent=function(eventName,tripCode,tripYear,customerNumber){$.when(angularUtils.angularIsReady('publishTpcBrowsingEvent')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'Tpc1minGeneric',formName:eventName,tripCode:tripCode,tripYear:tripYear,customerNumber:customerNumber});}},function(error){throw new Error(error);},function(message){});}
_this.trackFormShow=function(formName,options){if(options===undefined){var options={linktype:"",linkvalue:"",tripcode:"",tripsequence:""}}
$.when(angularUtils.angularIsReady('trackFormShow')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'FormShow',formName:formName,options:options});}},function(error){throw new Error(error);},function(message){});}
_this.publishTravelPlannerAction=function(action,rank){$.when(angularUtils.angularIsReady('publishTravelPlannerAction')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TravelPlannerAction',actionName:action,actionValue:rank});}},function(error){throw new Error(error);},function(message){});}
_this.TrackBrochureUrlResult=function(brochureCategory,brochureType){$.when(angularUtils.angularIsReady('TrackBrochureUrlResult')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'BrochureUrlResult',brochureCategory:brochureCategory,brochureType:brochureType});}},function(error){throw new Error(error);},function(message){});}
_this.TrackFreeCatalogRequest=function(custNum,tripList){$.when(angularUtils.angularIsReady('TrackFreeCatalogRequest')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'FreeCatalogRequest',customerNumber:custNum,tripList:tripList});}},function(error){throw new Error(error);},function(message){});}
_this.publishRegistrationStart=function(formName){$.when(angularUtils.angularIsReady('publishRegistrationStart')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'RegistrationStart',formName:formName});}},function(error){throw new Error(error);},function(message){});}
_this.TrackInboxMessageOpen=function(params){$.when(angularUtils.angularIsReady('TrackInboxMessageOpen')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'OpenInboxMessage',messageDetails:(params&&params.messageDetails)?params.messageDetails:''});}},function(error){throw new Error(error);},function(message){});}
_this.TrackSweepstakesRegisterConfirmation=function trackSweepstakesRegisterConfirmation(){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SweepstakesRegisterConfirmation'});}}
_this.TrackRegistrationSuccess=function trackRegistrationSuccess(formName){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'RegistrationSuccess',formName:formName});}};_this.TrackVideoRating=function trackVideoRating(video){$.when(angularUtils.angularIsReady('TrackVideoRating')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'VideoRating',video:video||{}});}},function(error){throw new Error(error);},function(message){});}
_this.TrackRecognitionSignInRegistrationSuccess=function(options){$.when(angularUtils.angularIsReady('TrackRecognitionSignInRegistrationSuccess')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SigninRegisterSuccess',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackDnPSummaryConfirmationModel=function(options){$.when(angularUtils.angularIsReady('TrackDnPSummaryConfirmationModel')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'DnPSummaryConfirmationModel',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackReelEarthTpc=function(options){$.when(angularUtils.angularIsReady('TrackReelEarthTpc')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'ReelEarthTpc',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackTPGFormModel=function(options){$.when(angularUtils.angularIsReady('TrackTPGFormModel')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TPGFormModel',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackTPGViewOnline=function(options){$.when(angularUtils.angularIsReady('TrackTPGViewOnline')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TPGViewOnline',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackTPGFacets=function(options){$.when(angularUtils.angularIsReady('TrackTPGFacets')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'TPGFacetsRequest',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackSoloTips=function(options){$.when(angularUtils.angularIsReady('TrackSoloTips')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SoloTipsRequest',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackGlobalTPGFormModel=function(options){$.when(angularUtils.angularIsReady('TrackGlobalTPGFormModel')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'GlobalTPGFormModel',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackGlobalTPGViewOnline=function(options){$.when(angularUtils.angularIsReady('TrackGlobalTPGViewOnline')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'GlobalTPGViewOnline',options:options});}},function(error){throw new Error(error);},function(message){});}
this.TrackSoloTipsViewOnline=function(options){$.when(angularUtils.angularIsReady('TrackSoloTipsViewOnline')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'SoloTipsViewOnline',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.TrackRequestCallbackModal=function(options){$.when(angularUtils.angularIsReady('TrackRequestCallbackModal')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'RequestCallbackModal',options:options});}},function(error){throw new Error(error);},function(message){});}
_this.trackShareVideoFormShow=function(formName,options){if(options===undefined){options={videoGuid:"",tripkey:"",videoName:"",videoType:"",componentName:"",linkValue:"",formName:'Content: Share Video With Friends',modelAction:'start'}}
$.when(angularUtils.angularIsReady('trackShareVideoFormShow')).then(function(message){getAnalyticsService();if(_analyticsService){_analyticsService.trackRule({rule:'ShareVideoFormShow',formName:formName,options:options});}},function(error){throw new Error(error);},function(message){});}
_this.init();};return analyticsBridge;});define('Product/components/shipAccommodationModal',[],function(){var shipAccommodationModal=function(){var _this=this;_this.init=function(){var shipAccommodatioModals=document.querySelectorAll('.js-ship-accommodation-modal[data-initalized="false"]');if(shipAccommodatioModals.length===0){return;}
var _config={activeClass:"active",modal:{closeIcon:".js-ship-modal-close",active:".gcc-modal.active",contentContainer:".js-ship-accommodation-modal"},tabs:{tab:".js-modal-tab",photos:".js-input-ship-photos",firstLabels:".js-modal-tab:first-child + label",virtualTour:".js-input-ship-tour",deckPlanLabel:".js-input-ship-deckplan + label",deckplan:".js-input-ship-deckplan"},virtualTour:{veiwer:".gcc-modal.active .js-vtour-active-player",navigationItem:".js-virtual-tour-link",navigationItemActive:".gcc-modal.active .js-virtual-tour-link.active",firstNavigationItem:".gcc-modal.active .js-virtual-tour-link:first-child"},deckplan:{overview:".js-ship-deck-overview",cabinDetailsControl:".js-input-ship-cabin-details",cabinDetailsLabel:".js-label-cabin-details",navigation:".js-deck-navigation",cabinsDescription:".js-deckplan-description"},slider:{photo:".js-slick-ship-photos.slick-initialized",deckplan:".js-deckplan-slider.slick-initialized",nonInitializedPhotoSlider:".js-slick-ship-photos:not(.slick-initialized)",nonItintializedDeckPlanSlider:".js-deckplan-slider:not(.slick-initialized)"},links:{datesPricesDeckPlanLink:".js-open-deck-plan"}}
function initSliders(){if(_config.slider.nonInitializedPhotoSlider.length>0){$(_config.slider.nonInitializedPhotoSlider).each(function(){$(this).slick({slidesToShow:1,slidesToScroll:1,mobileFirst:true,dots:true,adaptiveHeight:true,responsive:[{breakpoint:600,settings:{dots:false,arrows:true}},{breakpoint:1,settings:{arrows:false}}]});});setTimeout(resetPhotoSlider,1000);}
if(_config.slider.nonItintializedDeckPlanSlider.length>0){$(_config.slider.nonItintializedDeckPlanSlider).each(function(){$(this).slick({slidesToShow:1,slidesToScroll:1,mobileFirst:true,responsive:[{breakpoint:600,settings:{arrows:true}},{breakpoint:1,settings:{arrows:false}}]});});$(_config.slider.deckplan).off('afterChange').on('afterChange',function(event,slick,currentSlide){swtichDeckPlans(currentSlide);});}}
function resetPhotoSlider(){if(_config.slider.photo.length>0){$(_config.slider.photo).slick('resize');$(_config.slider.photo).slick('slickGoTo',0,true);}}
function closeAllCabinDetails(){var cabinDetailControls=document.querySelectorAll(_config.deckplan.cabinDetailsControl);cabinDetailControls.forEach(function(cabinDetailControl){if(cabinDetailControl.checked){cabinDetailControl.checked=false;}});}
function swtichDeckPlans(deck){$(_config.deckplan.navigation).removeClass('active');$(_config.deckplan.cabinsDescription).removeClass('active');$(_config.deckplan.overview).hide();$(_config.deckplan.overview+'[data-deck="'+deck+'"]').show();$('[data-deck="'+deck+'"]').addClass('active');}
function resetDeckPlans(){if($(_config.modal.active+" "+_config.slider.deckplan).length>0){$(_config.modal.active+" "+_config.slider.deckplan).slick('slickGoTo',0,true);swtichDeckPlans(0);closeAllCabinDetails();}}
function openTab(tabToOpen){var tabs=document.querySelectorAll(tabToOpen);tabs.forEach(function(tab){tab.click();});}
function resetVirtualTourNavigation(){var firstNavigationItem=document.querySelector(_config.virtualTour.firstNavigationItem);if(firstNavigationItem.classList.contains(_config.activeClass)){return;}else{var navigationItemActive=document.querySelector(_config.virtualTour.navigationItemActive);navigationItemActive.classList.remove(_config.activeClass);firstNavigationItem.classList.add(_config.activeClass);}}
function openVirtualToursTab(){var virtualTourTab=document.querySelector(_config.modal.active+" "+_config.tabs.virtualTour);if(virtualTourTab.checked){var firstNavigationItem=document.querySelector(_config.virtualTour.firstNavigationItem);var virtualTourViewer=document.querySelector(_config.virtualTour.veiwer);virtualTourViewer.src=firstNavigationItem.dataset.src;resetVirtualTourNavigation();}}
function closeShipAccommodatioModal(){resetPhotoSlider();resetDeckPlans();openTab(_config.tabs.firstLabels);}
function bindEventHandlers(){$(_config.modal.closeIcon).off('click',closeShipAccommodatioModal).on('click',closeShipAccommodatioModal);$(_config.tabs.photos).off('change',resetPhotoSlider).on('change',resetPhotoSlider);$(_config.tabs.deckplan).off('change',resetDeckPlans).on('change',resetDeckPlans);$(_config.links.datesPricesDeckPlanLink).off('click.deckplan').on('click.deckplan',function(){openTab(_config.tabs.deckPlanLabel)});$(_config.tabs.virtualTour).off('change',openVirtualToursTab).on('change',openVirtualToursTab);$(_config.virtualTour.navigationItem).off('click.virturaltour').on('click.virturaltour',function(){$(_config.virtualTour.veiwer).attr('src',$(this).data('src'));$(_config.virtualTour.navigationItem).removeClass(_config.activeClass);$(this).addClass(_config.activeClass);});$(_config.deckplan.navigation).off('click.decknav').on('click.devnav',function(){$(_config.deckplan.navigation).removeClass(_config.activeClass);$(_config.deckplan.overview).hide();$(this).addClass(_config.activeClass);$(_config.deckplan.overview+'[data-deck="'+$(this).data('deck')+'"]').show();$(_config.slider.deckplan).slick('slickGoTo',$(this).data('deck'));});$(_config.deckplan.cabinDetailsControl).off('change').on('change',function(){if(this.checked){var parent=this.parentElement.getBoundingClientRect();$(_config.modal.contentContainer).animate({scrollTop:parent.top},500);}});}
function initShipModals(){shipAccommodatioModals.forEach(function(shipAccommodatioModal){shipAccommodatioModal.dataset.initalized=true;});}
$(document).ready(function(){initShipModals();initSliders();bindEventHandlers();});};};return shipAccommodationModal;});define('Product/components/modals',['Product/components/slickSliders','Analytics/components/AnalyticsBridge','Product/components/shipAccommodationModal'],function(slickSliders,analyticsBridge,shipAccommodationModal){var modalsModule=function(){var _this=this;var _analyticsBridge=new analyticsBridge();var _shipAccommodationModal=new shipAccommodationModal();var _slickSliders=new slickSliders();_this.init=function(){if(!isInExperienceEditor){$('.js-modal-link').off('.modalBindings');$('.js-modal-link').on('click.modalBindings',jsModalLinkClickHandler);if(_.has(gcc,'bindNonHashModals')){gcc.bindNonHashModals();}
if(_.has(gcc,'bindShareVideoModals')){gcc.bindShareVideoModals();}}
_shipAccommodationModal.init();_slickSliders.accommodationCarouselSlider();};function jsModalLinkClickHandler(e){e.stopPropagation();e.preventDefault();var modalID=$(this).attr("href");if(modalID!==null){_this.openModal(modalID);var modalReqType=$(this).data().modalReqType;if(modalReqType)_analyticsBridge.TrackOpenModalEvent({modalReqType:modalReqType});}}
_this.initShareTripWithFriend=function(){$("#shareTripWithFriend").off("click").on("click",function(){_this.openModal("#shareTripWithFriendModal",{tripKey:$(this).attr("data-tripkey"),formViewName:"Forms/"+$(this).attr("data-formviewname")});});}
_this.initEmailShareTripWithFriend=function(){$("#emailShareTripWithFriend").off("click").on("click",function(){_this.openShareByTripByEmailModal({formViewName:"Forms/"+$(this).attr("data-formviewname")});});}
_this.openShareByTripByEmailModal=function(options){$.ajax({async:false,cache:false,url:"/Forms/Share/ShareTripFormEmail",data:options,type:"POST",success:function(response){if(response!=""){$(".js-form-share-container").empty().html(response);}
else{$(".js-form-share-container").empty().html("Form Load failed");}}});}
_this.openModal=function(modalID,options){if(modalID==="#shareWithFriendModal"){$.ajax({async:false,cache:false,url:"/Forms/Share/ShareFormEmail",data:options,type:"POST",success:function(response){if(response!=""){$("js-share-modal-body").empty().html(response);}
else{$("#shareWithFriendModal").empty().html("Form Load failed");}}});}
if(modalID==="#shareTripWithFriendModal"){_analyticsBridge.trackFormShow("Content: Share With Friends");$.ajax({async:false,cache:false,url:"/Forms/Share/ShareForm",data:options,type:"POST",success:function(response){if(response!=""){$("#shareTripWithFriendModal").empty().html(response);}
else{$("#shareTripWithFriendModal").empty().html("Form Load failed");}}});}
if(modalID==="#modalRequestCall"||modalID==="#modalRequestCallEmail"){$('input[type=hidden][name=UserItineraryKey]',modalID).val(gcc.requestcall.tripbuilder.userItineraryKey);$(".rac-nav > li > a",modalID).on("click",function(event){var captionTabName=$(this).attr('href');$("#rac-nav-caption div",modalID).each(function(){var captionTab=$(this);var captionTabValue=captionTab.data("tab");if(captionTabValue==captionTabName){captionTab.show();}
else{captionTab.hide();}});$(".modal-header > div",modalID).each(function(){var headingTab=$(this);var headingTabValue=headingTab.data("heading");if(headingTabValue==captionTabName){headingTab.show();}
else{headingTab.hide();}});});if(!!options){if(modalID==="#modalRequestCall"){if(options.tripname){$('div[data-heading="#racAboutTrip"] .modal-header-title ',modalID).html("Request More Information for "+decodeURIComponent((options.tripname+'').replace(/\+/g,'%20')));}else{$('div[data-heading="#racAboutTrip"] .modal-header-title ',modalID).html("Schedule a call to get your travel questions answered");}}
var linkOrigin;if(options.tripname&&options.tripname!==""){$('input[type=hidden][name=TripName]',modalID).val(options.tripname);}
else{$('input[type=hidden][name=TripName]',modalID).val("");}
if(options.tripcode&&options.tripcode!==""){$('input[type=hidden][name=TripCode]',modalID).val(options.tripcode);$('#ctaRacAboutTrip',modalID).attr('data-tripcode',options.tripcode);$('#ctaRacReservation',modalID).attr('data-tripcode',options.tripcode);linkOrigin='tripsearch';}else{$('input[type=hidden][name=TripCode]',modalID).val("");$('#ctaRacAboutTrip',modalID).attr('data-tripcode',"");$('#ctaRacReservation',modalID).attr('data-tripcode',"");linkOrigin='global';}
if(options.tripbrand&&options.tripbrand!==""){$('input[type=hidden][name=TripBrand]',modalID).val(options.tripbrand);$('#ctaRacAboutTrip',modalID).attr('data-tripbrand',options.tripbrand);$('#ctaRacReservation',modalID).attr('data-tripbrand',options.tripbrand);}else{$('input[type=hidden][name=TripBrand]',modalID).val("");$('#ctaRacAboutTrip',modalID).attr('data-tripbrand',"");$('#ctaRacReservation',modalID).attr('data-tripbrand',"");}
if(options.tripyear&&options.tripyear!==""){$('input[type=hidden][name=TripYear]',modalID).val(options.tripyear);$('#ctaRacAboutTrip',modalID).attr('data-tripyear',options.tripyear);$('#ctaRacReservation',modalID).attr('data-tripyear',options.tripyear);}else{$('input[type=hidden][name=TripYear]',modalID).val("");$('#ctaRacAboutTrip',modalID).attr('data-tripyear',"");$('#ctaRacReservation',modalID).attr('data-tripyear',"");}
if(options.tripsequence&&options.tripsequence!==""){$('input[type=hidden][name=TripSequence]',modalID).val(options.tripsequence);$('#ctaRacAboutTrip',modalID).attr('data-tripsequence',options.tripsequence);$('#ctaRacReservation',modalID).attr('data-tripsequence',options.tripsequence);}else{$('input[type=hidden][name=TripSequence]',modalID).val("");$('#ctaRacAboutTrip',modalID).attr('data-tripsequence',"");$('#ctaRacReservation',modalID).attr('data-tripsequence',"");}
if(modalID==="#modalRequestCall"){TrackFormShow(linkOrigin+":request_call_sales",options);}}}
$(modalID).modal({minWidth:$(modalID).data('width')?$(modalID).data('width'):800,maxWidth:$(modalID).data('width')?$(modalID).data('width'):1000,closeHTML:'<a href="#!" title="close">close<i class="icon icon-modal-close"></i></a>',overlayClose:true,onOpen:function(dialog){dialog.overlay.fadeIn('fast',function(){dialog.container.fadeIn('fast',function(){dialog.container.css({top:dialog.container.offset().top,position:'absolute',height:'auto'});dialog.data.fadeIn('fast');if(dialog.container.find('[autofocus]').length>0){dialog.container.find('[autofocus]')[0].focus();}});});},onClose:function(dialog){dialog.data.hide();dialog.container.hide();dialog.overlay.hide();if(dialog.container.find('.js-zoom').length>0){$('.zoom-lens, .snipe-lens').remove();}
if(dialog.container.find('.traveler-name-change-result').length>0){$('.traveler-name-change-result').empty();}
$.modal.close();},persist:$(modalID).data('persist')});}
_this.openTpgModal=function(){if(typeof $("#tpg-catalog").html()=="undefined"){_this.openTpgModal();}else{$("#tpg-catalog").addClass("active");}}
_this.modalWithTabContent=function(){$('.js-modal-with-tab').on('click',function(){var _config={activeModalID:$(this).attr('href'),shipTabLinks:'.ship-tab-link',newActiveTab:'.ship-tab-link[data-tab="'+$(this).data('tab')+'"]',activeClass:'active'}
$(_config.activeModalID).find(_config.shipTabLinks).remove(_config.activeClass);$(_config.activeModalID).find(_config.newActiveTab).trigger('click');});}
_this.updateLoginModalReturnUrl=function(url){$("#ReturnUrl").val(url);}};return modalsModule;});define('Video/components/BcPlayer',[],function(){function pausePlayersInContainer(container){if(container&&typeof videojs!=="undefined"&&videojs.players){$(container).find("div.video-js").each(function(index,element){if(videojs.players[element.id]&&!videojs.players[element.id].paused()){videojs.players[element.id].pause();}});}}
function pauseOtherPlayers(keepPlayingPlayerId){if(typeof videojs!=="undefined"&&videojs.players){var _keepPlayingPlayerId=keepPlayingPlayerId;$('.video-js').each(function(index,element){if(videojs.players[element.id]&&!videojs.players[element.id].paused()&&element.id!=_keepPlayingPlayerId){videojs.players[element.id].pause();}});}}
return{pausePlayersInContainer:pausePlayersInContainer,pauseOtherPlayers:pauseOtherPlayers};});define('SitecoreExtensions/components/urlParser',[],function(){var urlParserModule=function(){var _this=this;_this.getUrlVars=function(url){var vars=[],hash;if(!url)
url=window.location.href;var hashes=url.slice(url.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;}
_this.getUrlVar=function(key,url){return _this.getUrlVars(url)[key];}
_this.pushUrl=function(partial,url,container,replaceState){if(history.pushState){var newurl=window.location.protocol+"//"+window.location.host+url;if(replaceState){window.history.replaceState({url:url,partial:partial,container:container},'',newurl);}else{window.history.pushState({url:url,partial:partial,container:container},'',newurl);}}}
_this.getDomainName=function(){return window.location.hostname.substring(window.location.hostname.lastIndexOf(".",window.location.hostname.lastIndexOf(".")-1)+1);}
_this.autoPlayFromUrl=function(){var autoplayPlayerFromQuery=_this.getUrlVar("autoplayer");if(autoplayPlayerFromQuery===undefined){return;}
var autoPlayerElement=$('.video-js[id*="'+autoplayPlayerFromQuery+'"]');function playVideo(playerId){videojs(playerId).ready(function(){this.play();});}
function tryAutoPlay(playerId){setTimeout(function(){if(typeof videojs!='undefined'){playVideo(playerId);clearInterval(tryAutoPlay);}else{tryAutoPlay();}},250);}
if(autoPlayerElement.length<1){return;}else{var playerId=autoPlayerElement.attr('id');tryAutoPlay(playerId);}}};return urlParserModule;});define('Product/components/jsTabs',['Video/components/BcPlayer','Analytics/components/AnalyticsBridge','SitecoreExtensions/components/urlParser'],function(bcPlayer,analyticsBridge,urlParser){var _urlParser=new urlParser();var jsTabsModule=function(){var _this=this;var _analyticsBridge=new analyticsBridge();_this.config={link:'.js-tab-link',linkClass:'.js-tab-link',content:'.js-tab-content',linksParent:'.js-tab-links',startingTab:0,reset:false,callbackInit:function(params){},callbackClick:function(params){}};_this.checkParameters=function(){var icid=_urlParser.getUrlVar('icid');var day=_urlParser.getUrlVar('day');if(typeof icid!=='undefined'){if(icid.indexOf("itinerarytab_")!==-1){var tabName=icid.replace('itinerarytab_','');try{$("#"+tabName+".js-tab-link").click();}catch(err){$("#"+tabName+".js-tab-link").click();}
if(typeof day!=='undefined'){$("#tripItinerary-"+day+"-blade").addClass('active');}}}}
_this.init=function(options){var self=_this;if(!!options){$.extend(self.config,options.config);}
function bindClickEvents(){$(".js-vtour-link").off("click.js-vtour-link").on("click.js-vtour-link",function(){var dataAttr=$(this).attr("data-src");$(".js-vtour-active").html("<iframe src='"+dataAttr+"' webkitallowfullscreen='true' mozallowfullscreen='true' allowfullscreen='true' frameborder='0'></iframe>");});$(self.config.link).off('click.jsTabsLink').on('click.jsTabsLink',function(e){e.preventDefault();var _this=$(this),_linksParent=_this.parents(self.config.linksParent).first(),href=_this.attr('data-href')||_this.attr('href'),_target=$(href);var thisId=$(_this).attr('id');if(thisId==='ctaRacAboutTrip'||thisId==='ctaRacReservation'){var options={tripcode:$(_this).attr('data-tripcode'),tripbrand:$(_this).attr('data-tripbrand'),tripyear:$(_this).attr('data-tripyear'),linktype:'link',linkvalue:$(_this).text(),tripsequence:$(_this).attr('data-tripsequence')};var formName=(options.tripcode?'tripsearch':'global')+
(thisId==='ctaRacAboutTrip'?':request_call_sales':':request_call_service');TrackFormShow(formName,options);}
if(typeof gcc!="undefined"&&gcc.page&&gcc.page.pageName){gcc.oldFestivalPageValue=gcc.page.pageName;}
if($(_this).attr('data-link-name')==='ItineraryOptions_link'){thisId=$(_this).attr('year')+":"+thisId;}
_analyticsBridge.addTertiary(thisId);if(_linksParent.length){if(!_this.hasClass('active')){$(self.config.linkClass+'.active',_linksParent).each(function(index,element){bcPlayer.pausePlayersInContainer($(element).attr('href'));});$(self.config.linkClass,_linksParent).removeClass('active').parent().removeClass('active');$(href).removeClass('active').siblings(self.config.content).removeClass('active');_this.addClass('active').parent().addClass('active');_target.addClass('active');self.config.callbackClick(e);}}else{if(_target.length){_target.addClass('active').siblings(self.config.content).removeClass('active');}}
$(window).scroll();});}
bindClickEvents();_this.checkParameters();$(self.config.linksParent).each(function(){var _tabsParent=$(this),_startingTab,_startingTabContent;_startingTab=_tabsParent.children('.active');if(_startingTab.length){_startingTab=_startingTab.eq(0);}else{_startingTab=_tabsParent.children().eq(self.config.startingTab);}
_startingTabContent=$(_startingTab.find(self.config.link).attr('data-href')||_startingTab.find(self.config.link).attr('href'));if(self.config.reset){_startingTab.siblings().find(self.config.link).off('click');}
if(_startingTab.find('#ctaRacAboutTrip').length===1){var _startTabLink=_startingTab.find('#ctaRacAboutTrip');if(_tabsParent.length){if(!_startingTab.hasClass('active')){$(self.config.linkClass,_tabsParent).removeClass('active').parent().removeClass('active');$(_startingTabContent).removeClass('active').siblings(self.config.content).removeClass('active');_startTabLink.addClass('active').parent().addClass('active');_startingTabContent.addClass('active');}}}else{_startingTab.find(self.config.link).click();}
self.config.callbackInit();});};};return jsTabsModule;});define('RunOnEveryPage/components/RatingVideo',[],function(){var baseEndpoint='/api/video';var RatingVideo=function(){var _this=this;var _config={ratingsGroup:".js-video-rating-wrapper",count:{upVotesPrefix:".js-like-count-",downVotesPrefix:".js-dislike-count-",viewCountPrefix:".videoCount_"},icon:{upVote:".fa-thumbs-up",downVote:".fa-thumbs-down"},analytics:{prefix:"vdrting:",addLike:"add_like",removeLike:"del_like",changeToLike:"ch2_like",addDislike:"add_dislike",removeDislike:"del_dislike",changeToDislike:"ch2_dislike"},iterate:{add:"increase",subtract:""},actions:{clickTouchEvent:$.support.touch?"touchend":"click",likes:"likes",dislikes:"dislikes",none:"none"},cookies:{liked:"gcc-myvideos-liked",disliked:"gcc-myvideos-disliked"}}
var videoLikeCookieHasValue=!!$.cookie(_config.cookies.liked)&&$.cookie(_config.cookies.liked)!="";var videoDislikeCookieHasValue=!!$.cookie(_config.cookies.disliked)&&$.cookie(_config.cookies.disliked)!="";var containsRatingCookies=videoLikeCookieHasValue||videoDislikeCookieHasValue;function isVideoInRatingCookie(videoGuid){var cookieCheck={isPresent:false,ratingType:""};if($.cookie(_config.cookies.liked).indexOf(videoGuid)){cookieCheck={isPresent:true,ratingType:1};}else if($.cookie(_config.cookies.disliked).indexOf(videoGuid)){cookieCheck={isPresent:true,ratingType:-1};}
return cookieCheck;}
function checkLikeAndDislikes(videoGuidCollection){$.ajax({type:"POST",url:baseEndpoint+'/rating-status',data:{VideoGuidCollection:videoGuidCollection},dataType:'json',async:true,success:function(videoRatingCollection){$.each(videoRatingCollection,function(i,videoRating){LoadVideoData(videoRating);});}});function LoadVideoData(videoRating){var inViewLikes=_config.count.upVotesPrefix+videoRating.VideoGuid;var inViewDislikes=_config.count.downVotesPrefix+videoRating.VideoGuid;var inViewCount=_config.count.viewCountPrefix+videoRating.VideoGuid.toUpperCase();switch(videoRating.CustomerRating){case 1:toggleHighlightedIcons({videoGuid:videoRating.VideoGuid,setActiveTo:_config.actions.likes});break;case 0:toggleHighlightedIcons({videoGuid:videoRating.VideoGuid,setActiveTo:_config.actions.none});break;case-1:toggleHighlightedIcons({videoGuid:videoRating.VideoGuid,setActiveTo:_config.actions.dislikes});break;}
var likesCountsMatch=parseFloat($(inViewLikes).text())===videoRating.Likes;var dislikesCountsMatch=parseFloat($(inViewDislikes).text())===videoRating.Dislikes;var viewsCountsMatch=parseFloat($(inViewCount).text().replace(' views',''))===videoRating.Views;if(!likesCountsMatch){$(inViewLikes).text(videoRating.Likes);}
if(!dislikesCountsMatch){$(inViewDislikes).text(videoRating.Dislikes);}
if(!viewsCountsMatch){$(inViewCount).text(videoRating.Views+' views');}}}
function checkForMismatchedCachedValues(){var videoGuidCollection=[];$(_config.ratingsGroup).not(".initialized").each(function(){var videoGuid=$(this).data('vguid');$(this).addClass("initialized");videoGuidCollection.push(videoGuid);});checkLikeAndDislikes(videoGuidCollection);}
var modifyVoteCountInView=function(obj){var votes=$(obj.selector+obj.videoGuid).first().text();var updatedVoteCount;switch(obj.modify){case _config.iterate.add:updatedVoteCount=parseInt(votes)+1;break;case _config.iterate.subtract:updatedVoteCount=parseInt(votes)-1;break;}
$(obj.selector+obj.videoGuid).each(function(){$(this).text(updatedVoteCount)});}
function toggleHighlightedIcons(obj){switch(obj.setActiveTo){case _config.actions.likes:$(_config.icon.upVote+'[data-vguid='+obj.videoGuid+']').addClass('active');$(_config.icon.downVote+'[data-vguid='+obj.videoGuid+']').removeClass('active');break;case _config.actions.dislikes:$(_config.icon.upVote+'[data-vguid='+obj.videoGuid+']').removeClass('active');$(_config.icon.downVote+'[data-vguid='+obj.videoGuid+']').addClass('active');break;case _config.actions.none:$(_config.icon.upVote+'[data-vguid='+obj.videoGuid+']').removeClass('active');$(_config.icon.downVote+'[data-vguid ='+obj.videoGuid+']').removeClass('active');break;}}
function isSiblingActive(sibling){var isSiblineActive=false;$(sibling).each(function(){if($(this).hasClass('active')){isSiblineActive=true;}});return isSiblineActive;}
var Vote=function(vguid,rating){$.ajax({type:"POST",url:baseEndpoint+'/rate-video-by-vguid',data:{vguid:vguid,rating:rating}}).fail(function(response){console.error('gccVideoRatingService.sendRatingToBackEnd("'+video.vguid+'", '+video.rating+') - error in calling back-end endpoint - '+
' responded with status '+response.status+' '+response.statusText);});};var getVideoByGuid=function(vguid,d2ditinvideo){var currentVideo,video={};if(!vguid)return video;if(gcc.destinationCountry){gcc.DestPageVideos=gcc.DestPageVideos||[];var length=gcc.DestPageVideos.length;for(var i=0;i<length;i++){currentVideo=gcc.DestPageVideos[i];if(currentVideo&&currentVideo.guid){try{if(currentVideo.guid.toLowerCase()==vguid.toLowerCase()){video=currentVideo;break;}}catch(err){}}}
video.country=$('.js-bind-analytics').data('destinationlocation').toLowerCase();}else{gcc.TripVideos=gcc.TripVideos||[];var length=gcc.TripVideos.length;for(var i=0;i<length;i++){currentVideo=gcc.TripVideos[i];if(currentVideo&&currentVideo.guid){try{if(currentVideo.guid.toLowerCase()==vguid.toLowerCase()&&currentVideo.impDesc==d2ditinvideo){video=currentVideo;break;}else if(currentVideo.guid.toLowerCase()==vguid.toLowerCase()&&d2ditinvideo==""){video=currentVideo;break;}}catch(err){}}}}
return video;}
function bindVotes(obj){$(document).off(_config.actions.clickTouchEvent,obj.icon).on(_config.actions.clickTouchEvent,obj.icon,function(event){var vguid=$(this).data("vguid");var d2ditinvideo=$(this).data("d2ditinvideo");var isCurrentlyActive=$(this).hasClass('active');var video=getVideoByGuid(vguid,d2ditinvideo)||{};var voteIncrement=obj.activeType==_config.actions.likes?1:-1;if(isCurrentlyActive){Vote(vguid,0);modifyVoteCountInView({selector:obj.primaryPrefix,videoGuid:vguid,modify:_config.iterate.subtract});toggleHighlightedIcons({videoGuid:vguid,setActiveTo:_config.actions.none});video.action=obj.analyticsRemove;}else if(isSiblingActive(obj.iconSibling+'[data-vguid="'+vguid+'"]')){Vote(vguid,voteIncrement);modifyVoteCountInView({selector:obj.primaryPrefix,videoGuid:vguid,modify:_config.iterate.add});modifyVoteCountInView({selector:obj.siblingPrefix,videoGuid:vguid,modify:_config.iterate.subtract});toggleHighlightedIcons({videoGuid:vguid,setActiveTo:obj.activeType});video.action=obj.analyticsChange;}else{Vote(vguid,voteIncrement);modifyVoteCountInView({selector:obj.primaryPrefix,videoGuid:vguid,modify:_config.iterate.add});toggleHighlightedIcons({videoGuid:vguid,setActiveTo:obj.activeType});video.action=obj.analyticsAdd;}
video.action=_config.analytics.prefix+video.action;if(!$(event.target).hasClass('duplicate-event')){window.analyticsBridge.TrackVideoRating(video);}});}
function bindVideoRatingsEngagement(){bindVotes({activeType:_config.actions.likes,icon:_config.icon.upVote,iconSibling:_config.icon.downVote,primaryPrefix:_config.count.upVotesPrefix,siblingPrefix:_config.count.downVotesPrefix,analyticsAdd:_config.analytics.addLike,analyticsRemove:_config.analytics.removeLike,analyticsChange:_config.analytics.changeToLike});bindVotes({activeType:_config.actions.dislikes,icon:_config.icon.downVote,iconSibling:_config.icon.upVote,primaryPrefix:_config.count.downVotesPrefix,siblingPrefix:_config.count.upVotesPrefix,analyticsAdd:_config.analytics.addDislike,analyticsRemove:_config.analytics.removeDislike,analyticsChange:_config.analytics.changeToDislike});}
_this.init=function(){$(document).ready(function(){var hasUpVoteIcon=$(_config.icon.upVote).length>0;var hasDownVoteIcon=$(_config.icon.downVote).length>0;if(hasUpVoteIcon&&hasDownVoteIcon){bindVideoRatingsEngagement();checkForMismatchedCachedValues();}});}};return RatingVideo;});define('RunOnEveryPage/components/ajaxLoader',[],function(){var ajaxLoader=function(){gcc=gcc||{};gcc.showLoader=function(className){var ajaxContainer;var loader=document.createElement("div");loader.classList.add('ajax-update-overlay');loader.id="loading";if(typeof className==='string'){ajaxContainer=document.querySelector(className);}else{ajaxContainer=document.body;}
ajaxContainer.appendChild(loader);}
gcc.hideLoader=function(){var loaders=document.querySelectorAll('.ajax-update-overlay');loaders.forEach(function(loader){loader.parentNode.removeChild(loader);});}};return ajaxLoader;});define('RunOnEveryPage/components/videoHelper',[],function(){var videoHelper=function(){gcc=gcc||{};gcc.stopAnyPlayingVideo=function(){if(typeof videojs!="function"){return;}
let videos=document.querySelectorAll(".video-js");videos.forEach(function(video){if(video.id!==undefined&&video.id!==""){if(!videojs(video.id).paused()){videojs(video.id).pause();}}});}};return videoHelper;});define('RunOnEveryPage/components/nonhashmodals',['RunOnEveryPage/components/videoHelper'],function(videoHelper){var nonHashModals=function(){gcc=gcc||{};videoHelper();var _config={activeCssClass:"active",modalCssClass:"gcc-modal",modalOpenCssClass:"gcc-modal-open",activeModal:".gcc-modal.active",link:{open:".js-non-hash-modal",close:".js-non-hash-modal-close"},attr:{tabToOpen:"data-tab",modalToReopen:"data-modaltoreopen",reopenAfterSigninReturnUrl:"data-signinreturnurl"},action:{reopen:"",reopenAfterSigninReturnUrl:false},signin:{previousValue:"",hiddenValue:"signin-return-url",id:'signinmodal',signInModalContent:'#signin-modal-content'}}
function closeModals(){var openModal=document.querySelector(_config.activeModal);if(openModal!=null){openModal.classList.remove(_config.activeCssClass);gcc.stopAnyPlayingVideo();}else{if(location.hash!=''){location.hash=''}
if(window.location.href!==window.location.protocol+"//"+window.location.host+window.location.pathname
+window.location.search){history.pushState("",document.title,window.location.pathname+window.location.search);}}}
function gccModalClose(e){e.stopPropagation();e.preventDefault();closeModals();if(_config.action.reopen!=""){openModal(_config.action.reopen);_config.action.reopen="";}}
function closeModalIfClickedOutsideOfModal(e){if((e.target.classList.contains(_config.modalCssClass)||e.target.classList.contains(_config.modalOpenCssClass))&&e.target.classList.contains(_config.activeCssClass)){document.querySelector('.'+_config.activeCssClass+" "+_config.link.close).click();}}
function openModal(modalID){closeModals();modalID=modalID.replace('#','');let newModal=document.getElementById(modalID);if(newModal===undefined||modalID===_config.signin.id){if($(_config.signin.signInModalContent).length)
$(_config.signin.signInModalContent).empty();return;}
newModal.classList.add(_config.activeCssClass);newModal.firstElementChild.scrollTop=0;}
var waitForElement=function(selector,callback,signInReturnUrl,maxTimes=false){if($(selector).length){callback(signInReturnUrl);}else{if(maxTimes===false||maxTimes>0){(maxTimes!=false)&&maxTimes--;setTimeout(function(){waitForElement(selector,callback,signInReturnUrl,maxTimes);},100);}}};function sethiddenSigninReturnUrl(reopenAfterSigninReturnUrl){let hiddenSigninReturnUrl=document.getElementById(_config.signin.hiddenValue);if(hiddenSigninReturnUrl!=null){_config.action.reopenAfterSigninReturnUrl=true;_config.signin.previousValue=hiddenSigninReturnUrl.value;let doesCurrentValueHaveQuaeryString=hiddenSigninReturnUrl.value.indexOf("?")>0;let joiner=doesCurrentValueHaveQuaeryString?"&nhm=":"?nhm=";hiddenSigninReturnUrl.value=_config.signin.previousValue+joiner+reopenAfterSigninReturnUrl;}}
function gccModalOpenViaClick(e){var modalID=e.currentTarget.getAttribute('href');closeModals();openModal(modalID);if(modalID!=='#'+_config.signin.id){e.stopPropagation();e.preventDefault();}
let openTab=e.target.getAttribute(_config.attr.tabToOpen);let modalToReopen=e.target.getAttribute(_config.attr.modalToReopen);let reopenAfterSigninReturnUrl=e.target.getAttribute(_config.attr.reopenAfterSigninReturnUrl);if(reopenAfterSigninReturnUrl!=null&&modalToReopen!=""){waitForElement(('#'+_config.signin.hiddenValue),sethiddenSigninReturnUrl,reopenAfterSigninReturnUrl,5)}
if(modalToReopen!=undefined&&modalToReopen!=""){_config.action.reopen=modalToReopen;}
if(openTab!=undefined&&openTab!=""){$(modalID).find("input."+openTab).prop("checked",true);}}
function bindToOpen(){var nonHashLinks=document.querySelectorAll(_config.link.open);nonHashLinks.forEach(function(nonHashLink){if(!nonHashLink.classList.contains('initalized')){nonHashLink.classList.add('initalized');nonHashLink.addEventListener('click',gccModalOpenViaClick);}});}
function bindToClose(){var nonHashLinks=document.querySelectorAll(_config.link.close);nonHashLinks.forEach(function(nonHashLink){if(!nonHashLink.classList.contains('initalized')){nonHashLink.classList.add('initalized');nonHashLink.addEventListener('click',gccModalClose);}});}
gcc.closeNonHashModals=function(){closeModals();};let getUrlVars=function getUrlVars(){var map={},pattern="[?&]+([^=&]+)=([^&#]*)",regex=new RegExp(pattern,"gi"),parts=window.location.href.replace(regex,function(m,key,value){map[key]=value;});return map;}
function checkForSigninRedirectURL(){if(window.location.search.indexOf("nhm")>0){let params=getUrlVars();openModal("#"+params.nhm);let url=new URL(window.location.href);let sparams=new URLSearchParams(url.search.slice(1));sparams.delete('nhm');if(history.pushState){var newurl=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+sparams;window.history.pushState({path:newurl},'',newurl);}}}
gcc.bindNonHashModals=function(){checkForSigninRedirectURL();bindToOpen();bindToClose();window.addEventListener('click',closeModalIfClickedOutsideOfModal);}
gcc.bindNonHashModals();};return nonHashModals;});define('RunOnEveryPage/components/showErrorInComponent',[],function(){var register_ShowErrorInComponent=function(){gcc=gcc||{};gcc.showErrorInComponents=function(){$('div[data-automation="ErrorInComponent"]').show();}};return register_ShowErrorInComponent;});require(['RunOnEveryPage/components/autoPlayVideo','Product/components/modals','Product/components/jsTabs','Analytics/components/AnalyticsBridge','Angular/components/utils','RunOnEveryPage/components/RatingVideo','common/utils/getUrlVars','RunOnEveryPage/components/ajaxLoader','RunOnEveryPage/components/nonhashmodals','RunOnEveryPage/components/showErrorInComponent'],function(autoPlayVideo,modals,jsTabs,analyticsBridge,angularUtils,ratingVideo,getUrlVars,ajaxLoader,nonHashModals,registerShowErrorInComponent){var _modals=new modals();var _jsTabs=new jsTabs();var _ratingVideo=new ratingVideo();var _getUrlVars=new getUrlVars();new analyticsBridge();ajaxLoader();autoPlayVideo();_modals.init();_jsTabs.init();_ratingVideo.init();scrollToVideo();nonHashModals();registerShowErrorInComponent();window.angularUtils=angularUtils;window.ratingVideo=_ratingVideo;window.gccvidScrollToVideo=scrollToVideo;window.gccvidAutoPlayVideo=autoPlayVideo;function showTimedAlertMessage(messageControl,showAfterDuration){setTimeout(function(){$(messageControl).prop("checked",true);var params={};params.impressionDesc=$(messageControl).data('alert-guid')+":"+$(messageControl).data('alert-message');},showAfterDuration);}
if(typeof gcc.cloud==='undefined'||typeof gcc.cloud.analytics==='undefined'||typeof gcc.cloud.analytics.Omniture==='undefined'){showTimedAlertMessage('.js-global-alert-adblocker',2500);}
if($('.js-global-alert').length){showTimedAlertMessage('.js-global-alert',2500);}
function scrollToVideo(){if(_getUrlVars.gccvid!=null){const pn=_getUrlVars.gccvid;const _player=$('div[gemini-player="'+pn+'"]');if(_player.length){if(_player.parents(".slick-slider").length){const slideTo=parseInt(_player.parents(".slick-slide").data("slickIndex"));_player.parents(".slick-slider").slick('slickGoTo',slideTo);}
const scrollFromtop=_player.parent().offset().top;setTimeout(function(){$('body, html').scrollTop(scrollFromtop);},500);}}}
if($.cookie("iswebpopupconfirmation")!=undefined&&$.cookie("iswebpopupconfirmation")!='null'&&$.cookie("iswebpopupconfirmation")==="true"){var webpopupConfirmationEmail=$.cookie("webpopupconfirmationemail");$('.js-thank-you-confirm-email').text(webpopupConfirmationEmail);$("#WebPopupThankYou").addClass('active');$.removeCookie("iswebpopupconfirmation");$.removeCookie("webpopupconfirmationemail");}
(function(){let videoStartLinks=document.querySelectorAll('.js-start-video');videoStartLinks.forEach(function(link){if(!link.classList.contains("initalized")){link.classList.add("initalized");link.addEventListener("click",function(){let videoid=link.getAttribute("data-video");videojs(videoid).play();});}});})();});define("RunOnEveryPage/main",function(){});